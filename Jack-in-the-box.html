<!DOCTYPE html>
<html lang="el">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ğŸª Î•ÎºÏ€Î±Î¹Î´ÎµÏ…Ï„Î¹ÎºÏŒ: Î¤Î±Î»Î¬Î½Ï„Ï‰ÏƒÎ· - ÎšÏÎ¿ÏÏƒÎ· - Î‘Ï€Î¿ÎºÏŒÎ»Î»Î·ÏƒÎ· - Î’Î¿Î»Î®</title>
  <style>
    :root {
      --bg-dark: #0a0a1a;
      --bg-gradient: linear-gradient(135deg, #1a1a3a 0%, #2d1f4a 100%);
      --accent-gold: #FFD700;
      --accent-cyan: #4ECDC4;
      --accent-red: #FF6B6B;
      --accent-green: #7ED321;
      --accent-purple: #9B59B6;
      --accent-orange: #f39c12;
      --text-light: rgba(240, 246, 252, 0.95);
      --muted: rgba(240, 246, 252, 0.7);
      --panel-bg: rgba(20, 20, 40, 0.95);
      --panel-border: rgba(255, 255, 255, 0.15);
      --success: #2ecc71;
      --error: #e74c3c;
    }
    
    * { box-sizing: border-box; margin: 0; padding: 0; }
    
    body {
      font-family: system-ui, -apple-system, "Segoe UI", Roboto, sans-serif;
      background: var(--bg-gradient);
      color: var(--text-light);
      min-height: 100vh;
      overflow-x: hidden;
    }
    
    .app {
      max-width: 1400px;
      margin: 0 auto;
      padding: 10px;
      display: grid;
      grid-template-columns: 1fr 420px;
      gap: 12px;
      min-height: 100vh;
    }
    
    @media (max-width: 1000px) {
      .app { grid-template-columns: 1fr; }
      .side-panel { max-height: 50vh; overflow-y: auto; }
    }
    
    .canvas-container {
      background: var(--panel-bg);
      border: 1px solid var(--panel-border);
      border-radius: 16px;
      padding: 10px;
      position: relative;
    }
    
    canvas {
      width: 100%;
      height: auto;
      display: block;
      border-radius: 12px;
      background: linear-gradient(180deg, #0d0d25 0%, #1a1a35 100%);
    }
    
    .phase-overlay {
      position: absolute;
      top: 20px;
      left: 20px;
      right: 20px;
      display: flex;
      justify-content: space-between;
      pointer-events: none;
    }
    
    .phase-box {
      background: rgba(0,0,0,0.85);
      padding: 12px 18px;
      border-radius: 12px;
      border: 2px solid var(--accent-cyan);
    }
    
    .phase-box .label { color: var(--muted); font-size: 11px; }
    .phase-box .value { color: var(--accent-cyan); font-weight: bold; font-size: 15px; }
    
    .score-box {
      background: rgba(0,0,0,0.85);
      padding: 12px 18px;
      border-radius: 12px;
      border: 2px solid var(--accent-gold);
    }
    .score-box .label { color: var(--muted); font-size: 11px; }
    .score-box .value { color: var(--accent-gold); font-weight: bold; font-size: 18px; }
    
    .side-panel {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }
    
    .card {
      background: var(--panel-bg);
      border: 1px solid var(--panel-border);
      border-radius: 14px;
      padding: 14px;
    }
    
    .card h3 {
      color: var(--accent-cyan);
      font-size: 15px;
      margin-bottom: 10px;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    
    .data-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 8px;
    }
    
    .data-item {
      background: rgba(0,0,0,0.3);
      padding: 8px 10px;
      border-radius: 8px;
      border: 1px solid rgba(255,255,255,0.1);
    }
    
    .data-item .label { color: var(--muted); font-size: 11px; }
    .data-item .value { color: var(--text-light); font-weight: bold; font-size: 14px; }
    
    .quiz-card {
      border: 2px solid var(--accent-purple);
      background: rgba(155, 89, 182, 0.1);
    }
    
    .quiz-card h3 { color: var(--accent-purple); }
    
    .quiz-question {
      background: rgba(0,0,0,0.4);
      padding: 12px;
      border-radius: 10px;
      margin-bottom: 12px;
      font-size: 14px;
      line-height: 1.5;
    }
    
    .quiz-question code {
      background: rgba(255,255,255,0.1);
      padding: 2px 6px;
      border-radius: 4px;
      color: var(--accent-gold);
    }
    
    .quiz-input-row {
      display: flex;
      gap: 10px;
      align-items: center;
      margin-bottom: 10px;
    }
    
    .quiz-input {
      flex: 1;
      padding: 10px 14px;
      border-radius: 8px;
      border: 2px solid rgba(255,255,255,0.2);
      background: rgba(0,0,0,0.4);
      color: var(--text-light);
      font-size: 16px;
      font-weight: bold;
    }
    
    .quiz-input:focus {
      outline: none;
      border-color: var(--accent-purple);
    }
    
    .quiz-unit {
      color: var(--muted);
      font-size: 14px;
      min-width: 50px;
    }
    
    .quiz-btn {
      width: 100%;
      padding: 12px;
      border: none;
      border-radius: 10px;
      font-size: 15px;
      font-weight: bold;
      cursor: pointer;
      transition: all 0.2s;
      margin-bottom: 8px;
    }
    
    .quiz-btn.check {
      background: linear-gradient(135deg, var(--accent-purple), #8e44ad);
      color: white;
    }
    
    .quiz-btn.hint {
      background: linear-gradient(135deg, var(--accent-orange), #e67e22);
      color: white;
    }
    
    .quiz-btn.reveal {
      background: linear-gradient(135deg, var(--accent-red), #c0392b);
      color: white;
    }
    
    .quiz-btn.next {
      background: linear-gradient(135deg, var(--accent-green), #27ae60);
      color: white;
    }
    
    .quiz-btn:hover { transform: translateY(-2px); filter: brightness(1.1); }
    .quiz-btn:disabled { opacity: 0.5; cursor: not-allowed; transform: none; }
    
    .feedback {
      margin-top: 10px;
      padding: 10px;
      border-radius: 8px;
      font-size: 13px;
      line-height: 1.5;
    }
    
    .feedback.correct {
      background: rgba(46, 204, 113, 0.2);
      border: 1px solid var(--success);
      color: #a9dfbf;
    }
    
    .feedback.wrong {
      background: rgba(231, 76, 60, 0.2);
      border: 1px solid var(--error);
      color: #f5b7b1;
    }
    
    .feedback.info {
      background: rgba(52, 152, 219, 0.2);
      border: 1px solid #3498db;
      color: #aed6f1;
    }
    
    .hint-box {
      background: rgba(255, 215, 0, 0.1);
      border: 1px solid rgba(255, 215, 0, 0.3);
      border-radius: 10px;
      padding: 12px;
      margin-top: 10px;
    }
    
    .hint-box h4 {
      color: var(--accent-gold);
      font-size: 13px;
      margin-bottom: 8px;
    }
    
    .hint-box p {
      font-size: 13px;
      color: var(--text-light);
      margin: 4px 0;
      line-height: 1.6;
    }
    
    .hint-box .formula {
      font-family: "Times New Roman", serif;
      font-size: 15px;
      background: rgba(0,0,0,0.3);
      padding: 8px;
      border-radius: 6px;
      margin: 6px 0;
    }
    
    .btn-row { display: flex; gap: 8px; flex-wrap: wrap; }
    
    .btn {
      flex: 1;
      min-width: 100px;
      padding: 10px 14px;
      border: none;
      border-radius: 10px;
      font-size: 13px;
      font-weight: bold;
      cursor: pointer;
      transition: all 0.2s;
    }
    
    .btn-primary {
      background: linear-gradient(135deg, var(--accent-cyan), #3498db);
      color: #0a0a1a;
    }
    
    .btn-secondary {
      background: rgba(255,255,255,0.1);
      border: 1px solid rgba(255,255,255,0.2);
      color: var(--text-light);
    }
    
    .btn:hover { transform: translateY(-1px); filter: brightness(1.1); }
    .btn:disabled { opacity: 0.5; cursor: not-allowed; }
    
    .progress-container {
      background: rgba(0,0,0,0.4);
      border-radius: 10px;
      padding: 10px;
      margin-bottom: 10px;
    }
    
    .progress-steps {
      display: flex;
      justify-content: space-between;
      margin-bottom: 8px;
    }
    
    .progress-step {
      width: 26px;
      height: 26px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 11px;
      font-weight: bold;
      background: rgba(255,255,255,0.1);
      border: 2px solid rgba(255,255,255,0.2);
      color: var(--muted);
    }
    
    .progress-step.active {
      background: var(--accent-purple);
      border-color: var(--accent-purple);
      color: white;
    }
    
    .progress-step.done {
      background: var(--accent-green);
      border-color: var(--accent-green);
      color: white;
    }
    
    .progress-bar {
      height: 4px;
      background: rgba(255,255,255,0.1);
      border-radius: 2px;
    }
    
    .progress-fill {
      height: 100%;
      background: linear-gradient(90deg, var(--accent-green), var(--accent-cyan));
      border-radius: 2px;
      transition: width 0.5s;
    }
    
    .modal-overlay {
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.8);
      backdrop-filter: blur(8px);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 100;
      padding: 20px;
    }
    
    .modal {
      background: var(--panel-bg);
      border: 1px solid var(--panel-border);
      border-radius: 20px;
      padding: 24px;
      max-width: 600px;
      width: 100%;
      max-height: 90vh;
      overflow-y: auto;
    }
    
    .modal h2 {
      color: var(--accent-gold);
      font-size: 24px;
      margin-bottom: 16px;
      text-align: center;
    }
    
    .modal-section {
      background: rgba(0,0,0,0.3);
      border-radius: 12px;
      padding: 14px;
      margin-bottom: 14px;
    }
    
    .modal-section h4 {
      color: var(--accent-cyan);
      font-size: 14px;
      margin-bottom: 8px;
    }
    
    .modal-section p {
      color: var(--muted);
      font-size: 13px;
      line-height: 1.6;
    }
    
    .hidden { display: none !important; }
    
    .attempts-info {
      text-align: center;
      font-size: 12px;
      color: var(--muted);
      margin-top: 8px;
      padding: 6px;
      background: rgba(0,0,0,0.2);
      border-radius: 6px;
    }
    
    .attempts-info strong { color: var(--accent-gold); }
  </style>
</head>
<body>
  <div class="app">
    <!-- Canvas -->
    <div class="canvas-container">
      <canvas id="canvas" width="800" height="600"></canvas>
      <div class="phase-overlay">
        <div class="phase-box">
          <div class="label" id="lblPhase">Î¦Î‘Î£Î—</div>
          <div class="value" id="phaseDisplay">Î‘Î½Î±Î¼Î¿Î½Î®</div>
        </div>
        <div class="score-box">
          <div class="label" id="lblScore">Î’Î‘Î˜ÎœÎŸÎ™</div>
          <div class="value" id="scoreDisplay">0</div>
        </div>
      </div>
    </div>
    
    <!-- Side Panel -->
    <div class="side-panel">
      <!-- Progress -->
      <div class="card">
        <div class="progress-container">
          <div class="progress-steps">
            <div class="progress-step" id="step1">1</div>
            <div class="progress-step" id="step2">2</div>
            <div class="progress-step" id="step3">3</div>
            <div class="progress-step" id="step4">4</div>
            <div class="progress-step" id="step5">5</div>
            <div class="progress-step" id="step6">6</div>
            <div class="progress-step" id="step7">7</div>
          </div>
          <div class="progress-bar">
            <div class="progress-fill" id="progressFill" style="width: 0%"></div>
          </div>
        </div>
        <div style="text-align: center; color: var(--muted); font-size: 12px;">
          <span id="progressText">Î•ÏÏÏ„Î·Î¼Î± 1 Î±Ï€ÏŒ 7</span>
        </div>
      </div>
      
      
      <!-- Language -->
      <div class="card">
        <h3>ğŸŒ <span id="lblLanguage">Î“Î»ÏÏƒÏƒÎ±</span></h3>
        <select id="langSelect" class="quiz-input" style="width:100%; font-weight:700;">
          <option value="el">ğŸ‡¬ğŸ‡· Î•Î»Î»Î·Î½Î¹ÎºÎ¬</option>
          <option value="en">ğŸ‡¬ğŸ‡§ English</option>
          <option value="es">ğŸ‡ªğŸ‡¸ EspaÃ±ol</option>
          <option value="it">ğŸ‡®ğŸ‡¹ Italiano</option>
          <option value="fi">ğŸ‡«ğŸ‡® Suomi</option>
        </select>
      </div>

<!-- Given Data -->
      <div class="card">
        <h3>ğŸ“‹ <span id="lblGivenData">Î”ÎµÎ´Î¿Î¼Î­Î½Î± Î†ÏƒÎºÎ·ÏƒÎ·Ï‚</span></h3>
        <div class="data-grid">
          <div class="data-item">
            <div class="label" id="lblM1">mâ‚ (Î´Î¯ÏƒÎºÎ¿Ï‚)</div>
            <div class="value">0.1 kg</div>
          </div>
          <div class="data-item">
            <div class="label" id="lblM2">mâ‚‚ (ÎºÎµÏ†Î¬Î»Î¹)</div>
            <div class="value">0.1 kg</div>
          </div>
          <div class="data-item">
            <div class="label" id="lblM3">mâ‚ƒ (Î²ÏŒÎ»Î¿Ï‚)</div>
            <div class="value">0.4 kg</div>
          </div>
          <div class="data-item">
            <div class="label" id="lblD">d (Î˜.Î™.â†’Î¸.Ï†.Î¼.)</div>
            <div class="value">0.1 m</div>
          </div>
          <div class="data-item">
            <div class="label" id="lblA0">Aâ‚€ (Ï€Î»Î¬Ï„Î¿Ï‚)</div>
            <div class="value">0.5 m</div>
          </div>
          <div class="data-item">
            <div class="label" id="lblOmegaG">Ï‰, g</div>
            <div class="value">10, 10</div>
          </div>
        </div>
      </div>
      
      <!-- Quiz Card -->
      <div class="card quiz-card" id="quizCard">
        <h3>â“ <span id="quizTitle">Î•ÏÏÏ„Î·Î¼Î±</span></h3>
        <div class="quiz-question" id="quizQuestion"></div>
        
        <div class="quiz-input-row">
          <input type="number" class="quiz-input" id="quizInput" step="0.01" placeholder="Î‘Ï€Î¬Î½Ï„Î·ÏƒÎ·">
          <span class="quiz-unit" id="quizUnit">m/s</span>
        </div>
        
        <button class="quiz-btn check" id="btnCheck">âœ“ ÎˆÎ»ÎµÎ³Ï‡Î¿Ï‚</button>
        <button class="quiz-btn hint hidden" id="btnHint">ğŸ’¡ Î˜Î­Î»Ï‰ Î¥Ï€ÏŒÎ´ÎµÎ¹Î¾Î·</button>
        <button class="quiz-btn reveal hidden" id="btnReveal">ğŸ‘ Î”ÎµÎ¯Î¾Îµ Ï„Î·Î½ Î‘Ï€Î¬Î½Ï„Î·ÏƒÎ· (-10 Î²Î±Î¸Î¼Î¿Î¯)</button>
        <button class="quiz-btn next hidden" id="btnNext">â–¶ Î•Ï€ÏŒÎ¼ÎµÎ½Î¿</button>
        
        <div class="feedback hidden" id="feedback"></div>
        
        <div class="hint-box hidden" id="hintBox">
          <h4>ğŸ’¡ <span id="lblHintTitle">Î¥Ï€ÏŒÎ´ÎµÎ¹Î¾Î·</span></h4>
          <div id="hintContent"></div>
        </div>
        
        <div class="attempts-info" id="attemptsInfo">
          Î ÏÎ¿ÏƒÏ€Î¬Î¸ÎµÎ¹ÎµÏ‚: <strong>0</strong> | ÎœÎµÏ„Î¬ Î±Ï€ÏŒ Î»Î¬Î¸Î¿Ï‚ â†’ Ï…Ï€ÏŒÎ´ÎµÎ¹Î¾Î·
        </div>
      </div>
      
      <!-- Controls -->
      <div class="card">
        <h3>ğŸ® <span id="lblControls">ÎˆÎ»ÎµÎ³Ï‡Î¿Ï‚</span></h3>
        <div class="btn-row">
          <button class="btn btn-primary" id="btnStart">â–¶ Î£Ï…Î½Î­Ï‡ÎµÎ¹Î±</button>
          <button class="btn btn-secondary" id="btnReset">â†º Î•Ï€Î±Î½Î±Ï†Î¿ÏÎ¬</button>
        </div>
        <p style="margin-top: 10px; font-size: 11px; color: var(--muted); text-align: center;">
          ğŸ¢ <span id="lblSlowLine">ÎšÎ¯Î½Î·ÏƒÎ· ÏƒÎµ <strong style="color: var(--accent-cyan);">Î‘Î¡Î“Î— Î¤Î‘Î§Î¥Î¤Î—Î¤Î‘</strong> (Ã—0.12)</span>
        </p>
      </div>
    </div>
  </div>
  
  <!-- Intro Modal -->
  <div class="modal-overlay" id="introModal">
    <div class="modal">
      <h2 id="introTitle">ğŸª Î•Ï€Î¹Ï‡ÎµÎ¯ÏÎ·ÏƒÎ· Î•ÎºÏ„ÏŒÎ¾ÎµÏ…ÏƒÎ· ÎšÎ»ÏŒÎ¿Ï…Î½</h2>
      <p id="introSubtitle" style="text-align: center; color: var(--muted); margin-bottom: 16px;">
        Î¤Î±Î»Î¬Î½Ï„Ï‰ÏƒÎ· â€¢ Î•Î»Î±ÏƒÏ„Î¹ÎºÎ® ÎšÏÎ¿ÏÏƒÎ· â€¢ Î‘Ï€Î¿ÎºÏŒÎ»Î»Î·ÏƒÎ· â€¢ ÎšÎ±Ï„Î±ÎºÏŒÏÏ…Ï†Î· Î’Î¿Î»Î®
      </p>
      
      
      <div class="modal-section">
        <h4 id="introLangTitle">ğŸŒ Î“Î»ÏÏƒÏƒÎ± / Language</h4>
        <select id="langSelectIntro" class="quiz-input" style="width:100%; font-weight:700;">
          <option value="el">ğŸ‡¬ğŸ‡· Î•Î»Î»Î·Î½Î¹ÎºÎ¬</option>
          <option value="en">ğŸ‡¬ğŸ‡§ English</option>
          <option value="es">ğŸ‡ªğŸ‡¸ EspaÃ±ol</option>
          <option value="it">ğŸ‡®ğŸ‡¹ Italiano</option>
          <option value="fi">ğŸ‡«ğŸ‡® Suomi</option>
        </select>
        <p id="introLangNote" style="margin-top:10px; font-size:12px; color: var(--muted);">(Î‘Î»Î»Î¬Î¶ÎµÎ¹ ÏŒÎ»Î¿ Ï„Î¿ UI.)</p>
      </div>

<div class="modal-section">
        <h4 id="introExerciseTitle">ğŸ“– Î— Î†ÏƒÎºÎ·ÏƒÎ·</h4>
        <p id="introExerciseText">
          Î”ÏÎ¿ Ï€Î±ÏÎ¬Î»Î»Î·Î»Î± ÎµÎ»Î±Ï„Î®ÏÎ¹Î± ÏƒÏ„Î·ÏÎ¯Î¶Î¿Ï…Î½ Î´Î¯ÏƒÎºÎ¿ Î¼Îµ ÎºÎµÏ†Î¬Î»Î¹ ÎºÎ»ÏŒÎ¿Ï…Î½. 
          Î¤Î¿ ÏƒÏÏƒÏ„Î·Î¼Î± Ï„Î±Î»Î±Î½Ï„ÏÎ½ÎµÏ„Î±Î¹ ÎºÎ±Î¹ ÏƒÏ„Î· Î˜.Î™. ÏƒÏ…Î³ÎºÏÎ¿ÏÎµÏ„Î±Î¹ Î¼Îµ Î²ÏŒÎ»Î¿ Ï€Î¿Ï… Ï€ÎµÏÎ¹Î¼Î­Î½ÎµÎ¹ ÎµÎºÎµÎ¯.
          ÎœÎµÏ„Î¬ Ï„Î·Î½ ÎºÏÎ¿ÏÏƒÎ·, Ï„Î¿ ÎºÎµÏ†Î¬Î»Î¹ Î±Ï€Î¿ÎºÎ¿Î»Î»Î¬Ï„Î±Î¹ ÎºÎ±Î¹ ÏƒÏ…Î½Î±Î½Ï„Î¬ Ï„Î¿Î½ Î²ÏŒÎ»Î¿!
        </p>
      </div>
      
      <div class="modal-section">
        <h4 id="introScoringTitle">ğŸ¯ Î’Î±Î¸Î¼Î¿Î»Î¿Î³Î¯Î±</h4>
        <p id="introScoringText">
          â€¢ <strong style="color: var(--accent-green);">+20 Î²Î±Î¸Î¼Î¿Î¯</strong> Î³Î¹Î± ÎºÎ¬Î¸Îµ ÏƒÏ‰ÏƒÏ„Î® Î±Ï€Î¬Î½Ï„Î·ÏƒÎ·<br>
          â€¢ <strong style="color: var(--accent-orange);">Î¥Ï€ÏŒÎ´ÎµÎ¹Î¾Î·</strong> Î¼ÎµÏ„Î¬ Î±Ï€ÏŒ Î»Î¬Î¸Î¿Ï‚ (Ï‡Ï‰ÏÎ¯Ï‚ Ï€Î¿Î¹Î½Î®)<br>
          â€¢ <strong style="color: var(--accent-red);">-10 Î²Î±Î¸Î¼Î¿Î¯</strong> Î±Î½ Î¶Î·Ï„Î®ÏƒÎµÎ¹Ï‚ Ï„Î·Î½ Î±Ï€Î¬Î½Ï„Î·ÏƒÎ·<br><br>
          ÎœÎ­Î³Î¹ÏƒÏ„Î· Î²Î±Î¸Î¼Î¿Î»Î¿Î³Î¯Î±: <strong>140 Î²Î±Î¸Î¼Î¿Î¯</strong> (7 ÎµÏÏ‰Ï„Î®ÏƒÎµÎ¹Ï‚)
        </p>
      </div>
      
      <button class="btn btn-primary" style="width: 100%; margin-top: 10px; padding: 14px; font-size: 16px;" id="btnStartGame">
        ğŸš€ Î‘Ï‚ ÎÎµÎºÎ¹Î½Î®ÏƒÎ¿Ï…Î¼Îµ!
      </button>
    </div>
  </div>
  
  <!-- End Modal -->
  <div class="modal-overlay hidden" id="endModal">
    <div class="modal">
      <h2 id="endTitle">ğŸ‰ Î¤Î­Î»Î¿Ï‚!</h2>
      <div style="text-align: center; font-size: 60px; margin: 20px 0;" id="endMedal">ğŸ†</div>
      
      <div class="modal-section">
        <h4 id="endResultsTitle">ğŸ“Š Î‘Ï€Î¿Ï„ÎµÎ»Î­ÏƒÎ¼Î±Ï„Î±</h4>
        <div id="endResults"></div>
      </div>
      
      <div class="modal-section">
        <h4 id="endAnalysisTitle">ğŸ“ Î£ÏÎ½Î¿ÏˆÎ· Î¦Ï…ÏƒÎ¹ÎºÎ®Ï‚</h4>
        <div id="endAnalysis"></div>
      </div>
      
      <button class="btn btn-primary" style="width: 100%; margin-top: 10px; padding: 14px;" id="btnPlayAgain">
        ğŸ”„ Î Î±Î¯Î¾Îµ ÎÎ±Î½Î¬
      </button>
    </div>
  </div>

<script>
/* =====================================================
   I18N (EL / EN / ES / IT / FI)
===================================================== */
const I18N = {
  el: {
    phaseLabel: "Î¦Î‘Î£Î—",
    scoreLabel: "Î’Î‘Î˜ÎœÎŸÎ™",
    languageLabel: "Î“Î»ÏÏƒÏƒÎ±",
    givenData: "Î”ÎµÎ´Î¿Î¼Î­Î½Î± Î†ÏƒÎºÎ·ÏƒÎ·Ï‚",
    controls: "ÎˆÎ»ÎµÎ³Ï‡Î¿Ï‚",
    hintTitle: "Î¥Ï€ÏŒÎ´ÎµÎ¹Î¾Î·",
    slowLine: 'ÎšÎ¯Î½Î·ÏƒÎ· ÏƒÎµ <strong style="color: var(--accent-cyan);">Î‘Î¡Î“Î— Î¤Î‘Î§Î¥Î¤Î—Î¤Î‘</strong> (Ã—0.12)',
    btnContinue: "â–¶ Î£Ï…Î½Î­Ï‡ÎµÎ¹Î±",
    btnReset: "â†º Î•Ï€Î±Î½Î±Ï†Î¿ÏÎ¬",
    inputPh: "Î‘Ï€Î¬Î½Ï„Î·ÏƒÎ·",
    btnCheck: "âœ“ ÎˆÎ»ÎµÎ³Ï‡Î¿Ï‚",
    btnHint: "ğŸ’¡ Î˜Î­Î»Ï‰ Î¥Ï€ÏŒÎ´ÎµÎ¹Î¾Î·",
    btnReveal: "ğŸ‘ Î”ÎµÎ¯Î¾Îµ Ï„Î·Î½ Î‘Ï€Î¬Î½Ï„Î·ÏƒÎ· (-10 Î²Î±Î¸Î¼Î¿Î¯)",
    btnNext: "â–¶ Î•Ï€ÏŒÎ¼ÎµÎ½Î¿",
    progress: (i,n)=>`Î•ÏÏÏ„Î·Î¼Î± ${i} Î±Ï€ÏŒ ${n}`,
    attemptsInfo: (n, hintShown)=>`Î ÏÎ¿ÏƒÏ€Î¬Î¸ÎµÎ¹ÎµÏ‚: <strong>${n}</strong> | ${hintShown ? "ğŸ’¡ Î¥Ï€ÏŒÎ´ÎµÎ¹Î¾Î· ÎµÎ¼Ï†Î±Î½Î¯ÏƒÏ„Î·ÎºÎµ" : "ÎœÎµÏ„Î¬ Î±Ï€ÏŒ Î»Î¬Î¸Î¿Ï‚ â†’ Ï…Ï€ÏŒÎ´ÎµÎ¹Î¾Î·"}`,
    enterNumber: "Î Î±ÏÎ±ÎºÎ±Î»Ï ÎµÎ¹ÏƒÎ¬Î³ÎµÏ„Îµ Î­Î½Î±Î½ Î±ÏÎ¹Î¸Î¼ÏŒ!",
    wrong: (a,u)=>`âœ— Î›Î¬Î¸Î¿Ï‚! Î— Î±Ï€Î¬Î½Ï„Î·ÏƒÎ® ÏƒÎ¿Ï…: ${a} ${u}`,
    correct: (tol,u)=>`âœ“ Î£Ï‰ÏƒÏ„Î¬! (ÎµÎ½Ï„ÏŒÏ‚ Î±Î½Î¿Ï‡Î®Ï‚ Â±${tol} ${u})`,
    hintInfo: "ğŸ’¡ Î”Î¹Î¬Î²Î±ÏƒÎµ Ï„Î·Î½ Ï…Ï€ÏŒÎ´ÎµÎ¹Î¾Î· ÎºÎ±Î¹ Ï€ÏÎ¿ÏƒÏ€Î¬Î¸Î·ÏƒÎµ Î¾Î±Î½Î¬!",
    revealInfo: (v,u)=>`ğŸ‘ Î— ÏƒÏ‰ÏƒÏ„Î® Î±Ï€Î¬Î½Ï„Î·ÏƒÎ· ÎµÎ¯Î½Î±Î¹: <strong>${v} ${u}</strong><br><small>(-10 Î²Î±Î¸Î¼Î¿Î¯ Î³Î¹Î± Î±Ï€Î¿ÎºÎ¬Î»Ï…ÏˆÎ·)</small>`,
    introTitle: "ğŸª Î•Ï€Î¹Ï‡ÎµÎ¯ÏÎ·ÏƒÎ· Î•ÎºÏ„ÏŒÎ¾ÎµÏ…ÏƒÎ· ÎšÎ»ÏŒÎ¿Ï…Î½",
    introSubtitle: "Î¤Î±Î»Î¬Î½Ï„Ï‰ÏƒÎ· â€¢ Î•Î»Î±ÏƒÏ„Î¹ÎºÎ® ÎšÏÎ¿ÏÏƒÎ· â€¢ Î‘Ï€Î¿ÎºÏŒÎ»Î»Î·ÏƒÎ· â€¢ ÎšÎ±Ï„Î±ÎºÏŒÏÏ…Ï†Î· Î’Î¿Î»Î®",
    introLangTitle: "ğŸŒ Î“Î»ÏÏƒÏƒÎ± / Language",
    introLangNote: "(Î‘Î»Î»Î¬Î¶ÎµÎ¹ ÏŒÎ»Î¿ Ï„Î¿ UI.)",
    introExerciseTitle: "ğŸ“– Î— Î†ÏƒÎºÎ·ÏƒÎ·",
    introExerciseText:
      "Î”ÏÎ¿ ÎºÎ±Ï„Î±ÎºÏŒÏÏ…Ï†Î± ÎµÎ»Î±Ï„Î®ÏÎ¹Î± ÏƒÏ„Î·ÏÎ¯Î¶Î¿Ï…Î½ Î´Î¯ÏƒÎºÎ¿ Î¼Îµ ÎºÎµÏ†Î¬Î»Î¹ ÎºÎ»ÏŒÎ¿Ï…Î½. " +
      "Î¤Î¿ ÏƒÏÏƒÏ„Î·Î¼Î± Ï„Î±Î»Î±Î½Ï„ÏÎ½ÎµÏ„Î±Î¹ ÎºÎ±Î¹ ÏƒÏ„Î· Î˜.Î™. ÏƒÏ…Î³ÎºÏÎ¿ÏÎµÏ„Î±Î¹ ÎµÎ»Î±ÏƒÏ„Î¹ÎºÎ¬ Î¼Îµ Î²ÏŒÎ»Î¿ Ï€Î¿Ï… Ï€ÎµÏÎ¹Î¼Î­Î½ÎµÎ¹ ÎµÎºÎµÎ¯. " +
      "ÎœÎµÏ„Î¬ Ï„Î·Î½ ÎºÏÎ¿ÏÏƒÎ·, Ï„Î¿ ÎºÎµÏ†Î¬Î»Î¹ Î±Ï€Î¿ÎºÎ¿Î»Î»Î¬Ï„Î±Î¹ ÎºÎ±Î¹ Î±ÏÎ³ÏŒÏ„ÎµÏÎ± ÏƒÏ…Î½Î±Î½Ï„Î¬ Ï„Î¿Î½ Î²ÏŒÎ»Î¿.",
    introScoringTitle: "ğŸ¯ Î’Î±Î¸Î¼Î¿Î»Î¿Î³Î¯Î±",
    introScoringText:
      "â€¢ <strong style='color: var(--accent-green);'>+20 Î²Î±Î¸Î¼Î¿Î¯</strong> Î³Î¹Î± ÎºÎ¬Î¸Îµ ÏƒÏ‰ÏƒÏ„Î® Î±Ï€Î¬Î½Ï„Î·ÏƒÎ·<br>" +
      "â€¢ <strong style='color: var(--accent-orange);'>Î¥Ï€ÏŒÎ´ÎµÎ¹Î¾Î·</strong> Î¼ÎµÏ„Î¬ Î±Ï€ÏŒ Î»Î¬Î¸Î¿Ï‚ (Ï‡Ï‰ÏÎ¯Ï‚ Ï€Î¿Î¹Î½Î®)<br>" +
      "â€¢ <strong style='color: var(--accent-red);'>-10 Î²Î±Î¸Î¼Î¿Î¯</strong> Î±Î½ Î¶Î·Ï„Î®ÏƒÎµÎ¹Ï‚ Ï„Î·Î½ Î±Ï€Î¬Î½Ï„Î·ÏƒÎ·<br><br>" +
      "ÎœÎ­Î³Î¹ÏƒÏ„Î· Î²Î±Î¸Î¼Î¿Î»Î¿Î³Î¯Î±: <strong>140 Î²Î±Î¸Î¼Î¿Î¯</strong> (7 ÎµÏÏ‰Ï„Î®ÏƒÎµÎ¹Ï‚)",
    startGame: "ğŸš€ Î‘Ï‚ ÎÎµÎºÎ¹Î½Î®ÏƒÎ¿Ï…Î¼Îµ!",
    endResultsTitle: "ğŸ“Š Î‘Ï€Î¿Ï„ÎµÎ»Î­ÏƒÎ¼Î±Ï„Î±",
    endAnalysisTitle: "ğŸ“ Î£ÏÎ½Î¿ÏˆÎ· Î¦Ï…ÏƒÎ¹ÎºÎ®Ï‚",
    playAgain: "ğŸ”„ Î Î±Î¯Î¾Îµ ÎÎ±Î½Î¬",
    // data labels
    m1: "mâ‚ (Î´Î¯ÏƒÎºÎ¿Ï‚)",
    m2: "mâ‚‚ (ÎºÎµÏ†Î¬Î»Î¹)",
    m3: "mâ‚ƒ (Î²ÏŒÎ»Î¿Ï‚)",
    dLabel: "d (Î˜.Î™.â†’Î¸.Ï†.Î¼.)",
    a0Label: "Aâ‚€ (Ï€Î»Î¬Ï„Î¿Ï‚)",
    omegaG: "Ï‰, g",
    // phases
    phase_idle: "Î‘Î½Î±Î¼Î¿Î½Î®",
    phase_to_equilibrium: "â« Î ÏÎ¿Ï‚ Î˜.Î™.",
    phase_at_collision: "ğŸ’¥ ÎšÎ¡ÎŸÎ¥Î£Î— ÏƒÏ„Î· Î˜.Î™.!",
    phase_post_collision: "â¬â†— ÎœÎµÏ„Î¬ ÎºÏÎ¿ÏÏƒÎ·",
    phase_show_amplitude: "ğŸ“ ÎÎ­Î¿ Ï€Î»Î¬Ï„Î¿Ï‚ Aâ‚",
    phase_to_detach: "â« Î ÏÎ¿Ï‚ Î±Ï€Î¿ÎºÏŒÎ»Î»Î·ÏƒÎ·",
    phase_at_detach: "âœ‚ï¸ Î‘Ï€Î¿ÎºÏŒÎ»Î»Î·ÏƒÎ· ÏƒÏ„Î· Î¸.Ï†.Î¼.!",
    phase_to_meeting: "ğŸ¯ ÎšÎ¯Î½Î·ÏƒÎ· Î²Î»Î·Î¼Î¬Ï„Ï‰Î½",
    phase_meeting_done: "ğŸ’¥ Î£Ï…Î½Î¬Î½Ï„Î·ÏƒÎ·!",
    // canvas labels
    eqLine: "Î˜Î­ÏƒÎ· Î™ÏƒÎ¿ÏÏÎ¿Ï€Î¯Î±Ï‚ (x=0)",
    natLine: "Î˜Î­ÏƒÎ· Î¦Ï…Ïƒ. ÎœÎ®ÎºÎ¿Ï…Ï‚ (x=d)",
    arrowSystem: "Î£ÏÏƒÏ„Î·Î¼Î±",
    arrowBall: "Î’ÏŒÎ»Î¿Ï‚",
    arrowHead: "ÎšÎµÏ†Î¬Î»Î¹",
    arrowDisk: "Î”Î¯ÏƒÎºÎ¿Ï‚",
    meetingBanner: "ğŸ’¥ Î£Î¥ÎÎ‘ÎÎ¤Î—Î£Î—!",
    // end
    endExcellent: "ğŸ‰ Î•Î¾Î±Î¹ÏÎµÏ„Î¹ÎºÎ¬!",
    endGood: "ğŸ‘ Î Î¿Î»Ï ÎºÎ±Î»Î¬!",
    endOk: "ğŸ’ª ÎšÎ±Î»Î® Ï€ÏÎ¿ÏƒÏ€Î¬Î¸ÎµÎ¹Î±!",
    endStudy: "ğŸ“– Î§ÏÎµÎ¹Î¬Î¶ÎµÏ„Î±Î¹ Î¼ÎµÎ»Î­Ï„Î·",
    endScore: "Î’Î±Î¸Î¼Î¿Î»Î¿Î³Î¯Î±",
    endAccuracy: "Î‘ÎºÏÎ¯Î²ÎµÎ¹Î±",
    // questions
    q_u0_title: "Î’1: Î¤Î±Ï‡ÏÏ„Î·Ï„Î± Ï€ÏÎ¹Î½ ÎºÏÎ¿ÏÏƒÎ·",
    q_u0_q:
      "Î¤Î¿ ÏƒÏÏƒÏ„Î·Î¼Î± Ï†Ï„Î¬Î½ÎµÎ¹ ÏƒÏ„Î· <strong>Î˜Î­ÏƒÎ· Î™ÏƒÎ¿ÏÏÎ¿Ï€Î¯Î±Ï‚</strong> ÎºÎ¹Î½Î¿ÏÎ¼ÎµÎ½Î¿ Ï€ÏÎ¿Ï‚ Ï„Î± Ï€Î¬Î½Ï‰.<br>" +
      "Î Î¿Î¹Î± ÎµÎ¯Î½Î±Î¹ Î· Ï„Î±Ï‡ÏÏ„Î·Ï„Î± <code>uâ‚€</code> Î±ÎºÏÎ¹Î²ÏÏ‚ <strong>Ï€ÏÎ¹Î½</strong> Ï„Î·Î½ ÎºÏÎ¿ÏÏƒÎ·;",
    q_u0_hint:
      "<p><strong>Î£Ï„Î· Î˜.Î™. Î· Î±Ï€Î¿Î¼Î¬ÎºÏÏ…Î½ÏƒÎ· ÎµÎ¯Î½Î±Î¹ x = 0</strong></p>" +
      "<p class='formula'>u = Ï‰ Â· âˆš(AÂ² - xÂ²)</p>" +
      "<p>ÎŒÏ„Î±Î½ x = 0, Î· Ï„Î±Ï‡ÏÏ„Î·Ï„Î± Î³Î¯Î½ÎµÏ„Î±Î¹ Î¼Î­Î³Î¹ÏƒÏ„Î·:</p>" +
      "<p class='formula'>uâ‚€ = Ï‰ Â· Aâ‚€</p>" +
      "<p>Î‘Î½Ï„Î¹ÎºÎ±Ï„Î­ÏƒÏ„Î·ÏƒÎµ: Ï‰ = 10 rad/s, Aâ‚€ = 0.5 m</p>",
    q_u1_title: "Î’2Î±: Î¤Î±Ï‡ÏÏ„Î·Ï„Î± ÏƒÏ…ÏƒÏ„Î®Î¼Î±Ï„Î¿Ï‚ Î¼ÎµÏ„Î¬",
    q_u1_q:
      "Î— ÎºÏÎ¿ÏÏƒÎ· ÎµÎ¯Î½Î±Î¹ <strong>ÎµÎ»Î±ÏƒÏ„Î¹ÎºÎ®</strong>. ÎŸ Î²ÏŒÎ»Î¿Ï‚ Î®Ï„Î±Î½ Î±ÎºÎ¯Î½Î·Ï„Î¿Ï‚.<br>" +
      "Î Î¿Î¹Î± Î· Ï„Î±Ï‡ÏÏ„Î·Ï„Î± <code>uâ‚'</code> Ï„Î¿Ï… ÏƒÏ…ÏƒÏ„Î®Î¼Î±Ï„Î¿Ï‚ <strong>Î¼ÎµÏ„Î¬</strong> Ï„Î·Î½ ÎºÏÎ¿ÏÏƒÎ·;<br>" +
      "<small>(Î‘ÏÎ½Î·Ï„Î¹ÎºÏŒ = Ï€ÏÎ¿Ï‚ Ï„Î± ÎºÎ¬Ï„Ï‰)</small>",
    q_u1_hint:
      "<p><strong>Î¤ÏÏ€Î¿Ï‚ ÎµÎ»Î±ÏƒÏ„Î¹ÎºÎ®Ï‚ ÎºÏÎ¿ÏÏƒÎ·Ï‚:</strong></p>" +
      "<p class='formula'>uâ‚' = [(mâ‚+mâ‚‚) âˆ’ mâ‚ƒ] / [(mâ‚+mâ‚‚) + mâ‚ƒ] Ã— uâ‚€</p>" +
      "<p>ÎœÎµ mâ‚+mâ‚‚ = 0.2 kg ÎºÎ±Î¹ mâ‚ƒ = 0.4 kg:</p>" +
      "<p class='formula'>uâ‚' = (0.2 âˆ’ 0.4) / (0.2 + 0.4) Ã— uâ‚€</p>",
    q_u3_title: "Î’2Î²: Î¤Î±Ï‡ÏÏ„Î·Ï„Î± Î²ÏŒÎ»Î¿Ï… Î¼ÎµÏ„Î¬",
    q_u3_q:
      "Î Î¿Î¹Î± Î· Ï„Î±Ï‡ÏÏ„Î·Ï„Î± <code>uâ‚ƒ'</code> Ï„Î¿Ï… Î²ÏŒÎ»Î¿Ï… <strong>Î¼ÎµÏ„Î¬</strong> Ï„Î·Î½ ÎºÏÎ¿ÏÏƒÎ·;<br>" +
      "<small>(Î˜ÎµÏ„Î¹ÎºÏŒ = Ï€ÏÎ¿Ï‚ Ï„Î± Ï€Î¬Î½Ï‰)</small>",
    q_u3_hint:
      "<p><strong>Î¤ÏÏ€Î¿Ï‚ Î³Î¹Î± Ï„Î¿Î½ Î²ÏŒÎ»Î¿ (Î±ÏÏ‡Î¹ÎºÎ¬ Î±ÎºÎ¯Î½Î·Ï„Î¿Ï‚):</strong></p>" +
      "<p class='formula'>uâ‚ƒ' = 2(mâ‚+mâ‚‚) / [(mâ‚+mâ‚‚) + mâ‚ƒ] Ã— uâ‚€</p>" +
      "<p class='formula'>uâ‚ƒ' = (2 Ã— 0.2) / 0.6 Ã— uâ‚€</p>",
    q_a1_title: "Î“1: ÎÎ­Î¿ Ï€Î»Î¬Ï„Î¿Ï‚ Ï„Î±Î»Î¬Î½Ï„Ï‰ÏƒÎ·Ï‚",
    q_a1_q:
      "ÎœÎµÏ„Î¬ Ï„Î·Î½ ÎºÏÎ¿ÏÏƒÎ·, Ï„Î¿ ÏƒÏÏƒÏ„Î·Î¼Î± Ï„Î±Î»Î±Î½Ï„ÏÎ½ÎµÏ„Î±Î¹ Î¼Îµ Î½Î­Î¿ Ï€Î»Î¬Ï„Î¿Ï‚.<br>" +
      "Î Î¿Î¹Î¿ ÎµÎ¯Î½Î±Î¹ Ï„Î¿ <strong>Ï€Î»Î¬Ï„Î¿Ï‚ Aâ‚</strong>;",
    q_a1_hint:
      "<p><strong>Î£Ï„Î· Î˜.Î™. (x=0), ÏŒÎ»Î· Î· ÎµÎ½Î­ÏÎ³ÎµÎ¹Î± ÎµÎ¯Î½Î±Î¹ ÎºÎ¹Î½Î·Ï„Î¹ÎºÎ®:</strong></p>" +
      "<p class='formula'>Â½mÂ·uâ‚'Â² = Â½k<sub>Î¿Î»</sub>Â·Aâ‚Â²</p>" +
      "<p class='formula'>Aâ‚ = |uâ‚'| / Ï‰</p>",
    q_xdet_title: "Î“2Î±: Î˜Î­ÏƒÎ· Î±Ï€Î¿ÎºÏŒÎ»Î»Î·ÏƒÎ·Ï‚",
    q_xdet_q:
      "Î¤Î¿ ÎºÎµÏ†Î¬Î»Î¹ Î±Ï€Î¿ÎºÎ¿Î»Î»Î¬Ï„Î±Î¹ ÏŒÏ„Î±Î½ Î· ÎºÎ¬Î¸ÎµÏ„Î· Î´ÏÎ½Î±Î¼Î· N Î³Î¯Î½ÎµÎ¹ Î¼Î·Î´Î­Î½.<br>" +
      "Î£Îµ Ï€Î¿Î¹Î± <strong>Î¸Î­ÏƒÎ· x</strong> (Î±Ï€ÏŒ Ï„Î· Î˜.Î™.) Î³Î¯Î½ÎµÏ„Î±Î¹ Î· Î±Ï€Î¿ÎºÏŒÎ»Î»Î·ÏƒÎ·;",
    q_xdet_hint:
      "<p><strong>Î£Ï…Î½Î¸Î®ÎºÎ· Î±Ï€Î¿ÎºÏŒÎ»Î»Î·ÏƒÎ·Ï‚:</strong> N = 0 â†’ a = -g</p>" +
      "<p>Î‘Ï…Ï„ÏŒ ÏƒÏ…Î¼Î²Î±Î¯Î½ÎµÎ¹ ÏƒÏ„Î· Î¸Î­ÏƒÎ· Ï†Ï…ÏƒÎ¹ÎºÎ¿Ï Î¼Î®ÎºÎ¿Ï…Ï‚:</p>" +
      "<p class='formula'>x = d</p>",
    q_vdet_title: "Î“2Î²: Î¤Î±Ï‡ÏÏ„Î·Ï„Î± Î±Ï€Î¿ÎºÏŒÎ»Î»Î·ÏƒÎ·Ï‚",
    q_vdet_q:
      "Î Î¿Î¹Î± Î· Ï„Î±Ï‡ÏÏ„Î·Ï„Î± <code>u<sub>Î±Ï€</sub></code> Ï„Î· ÏƒÏ„Î¹Î³Î¼Î® Ï„Î·Ï‚ Î±Ï€Î¿ÎºÏŒÎ»Î»Î·ÏƒÎ·Ï‚;<br>" +
      "<small>(ÏƒÏ„Î· Î¸Î­ÏƒÎ· x = d = 0.1 m)</small>",
    q_vdet_hint:
      "<p class='formula'>u = Ï‰ Â· âˆš(Aâ‚Â² - xÂ²)</p>" +
      "<p class='formula'>u<sub>Î±Ï€</sub> = Ï‰ Â· âˆš(Aâ‚Â² - dÂ²)</p>",
    q_ymeet_title: "Î”: Î˜Î­ÏƒÎ· ÏƒÏ…Î½Î¬Î½Ï„Î·ÏƒÎ·Ï‚",
    q_ymeet_q:
      "ÎœÎµÏ„Î¬ Ï„Î·Î½ Î±Ï€Î¿ÎºÏŒÎ»Î»Î·ÏƒÎ·, ÎºÎµÏ†Î¬Î»Î¹ ÎºÎ±Î¹ Î²ÏŒÎ»Î¿Ï‚ ÎºÎ¹Î½Î¿ÏÎ½Ï„Î±Î¹ Ï‰Ï‚ Î²Î»Î®Î¼Î±Ï„Î±.<br>" +
      "Î£Îµ Ï€Î¿Î¹Î¿ <strong>ÏÏˆÎ¿Ï‚ y</strong> (Î±Ï€ÏŒ Î˜.Î™.) Î¸Î± ÏƒÏ…Î½Î±Î½Ï„Î·Î¸Î¿ÏÎ½;<br>" +
      "<small>t<sub>Î±Ï€Î¿Îº</sub> â‰ˆ 0.38 s Î¼ÎµÏ„Î¬ Ï„Î·Î½ ÎºÏÎ¿ÏÏƒÎ·</small>",
    q_ymeet_hint:
      "<p><strong>Î•Î¾Î¹ÏƒÏÏƒÎµÎ¹Ï‚ Î²Î»Î·Î¼Î¬Ï„Ï‰Î½ (Ï„ Î±Ï€ÏŒ Î±Ï€Î¿ÎºÏŒÎ»Î»Î·ÏƒÎ·):</strong></p>" +
      "<p class='formula'>ÎšÎµÏ†Î¬Î»Î¹: yâ‚‚ = d + u<sub>Î±Ï€</sub>Â·Ï„ âˆ’ Â½gÂ·Ï„Â²</p>" +
      "<p class='formula'>Î’ÏŒÎ»Î¿Ï‚: yâ‚ƒ = yâ‚ƒ,0 + uâ‚ƒÂ·Ï„ âˆ’ Â½gÂ·Ï„Â²</p>" +
      "<p>Î¤Î± âˆ’Â½gÏ„Â² Î±Ï€Î±Î»ÎµÎ¯Ï†Î¿Î½Ï„Î±Î¹. Î˜Î­ÏƒÎµ yâ‚‚ = yâ‚ƒ ÎºÎ±Î¹ Î»ÏÏƒÎµ.</p>",
  },

  en: {
    phaseLabel: "PHASE",
    scoreLabel: "SCORE",
    languageLabel: "Language",
    givenData: "Problem data",
    controls: "Controls",
    hintTitle: "Hint",
    slowLine: 'Motion in <strong style="color: var(--accent-cyan);">SLOW MODE</strong> (Ã—0.12)',
    btnContinue: "â–¶ Continue",
    btnReset: "â†º Reset",
    inputPh: "Answer",
    btnCheck: "âœ“ Check",
    btnHint: "ğŸ’¡ I want a hint",
    btnReveal: "ğŸ‘ Show the answer (-10 points)",
    btnNext: "â–¶ Next",
    progress: (i,n)=>`Question ${i} of ${n}`,
    attemptsInfo: (n, hintShown)=>`Attempts: <strong>${n}</strong> | ${hintShown ? "ğŸ’¡ Hint shown" : "After a wrong try â†’ hint"}`,
    enterNumber: "Please enter a number!",
    wrong: (a,u)=>`âœ— Wrong! Your answer: ${a} ${u}`,
    correct: (tol,u)=>`âœ“ Correct! (within tolerance Â±${tol} ${u})`,
    hintInfo: "ğŸ’¡ Read the hint and try again!",
    revealInfo: (v,u)=>`ğŸ‘ The correct answer is: <strong>${v} ${u}</strong><br><small>(-10 points for reveal)</small>`,
    introTitle: "ğŸª Operation: Clown Launch",
    introSubtitle: "Oscillation â€¢ Elastic collision â€¢ Detachment â€¢ Vertical motion",
    introLangTitle: "ğŸŒ Language",
    introLangNote: "(Changes the whole UI.)",
    introExerciseTitle: "ğŸ“– The problem",
    introExerciseText:
      "Two vertical springs support a disk with a clown head. " +
      "The system oscillates and at equilibrium it collides elastically with a ball waiting there. " +
      "After the collision, the head detaches and later meets the ball again.",
    introScoringTitle: "ğŸ¯ Scoring",
    introScoringText:
      "â€¢ <strong style='color: var(--accent-green);'>+20 points</strong> for each correct answer<br>" +
      "â€¢ <strong style='color: var(--accent-orange);'>Hint</strong> after a wrong try (no penalty)<br>" +
      "â€¢ <strong style='color: var(--accent-red);'>-10 points</strong> if you reveal the answer<br><br>" +
      "Max score: <strong>140 points</strong> (7 questions)",
    startGame: "ğŸš€ Start!",
    endResultsTitle: "ğŸ“Š Results",
    endAnalysisTitle: "ğŸ“ Physics summary",
    playAgain: "ğŸ”„ Play again",
    m1: "mâ‚ (disk)",
    m2: "mâ‚‚ (head)",
    m3: "mâ‚ƒ (ball)",
    dLabel: "d (eqâ†’natural)",
    a0Label: "Aâ‚€ (amplitude)",
    omegaG: "Ï‰, g",
    phase_idle: "Idle",
    phase_to_equilibrium: "â« To equilibrium",
    phase_at_collision: "ğŸ’¥ COLLISION at equilibrium!",
    phase_post_collision: "â¬â†— After collision",
    phase_show_amplitude: "ğŸ“ New amplitude Aâ‚",
    phase_to_detach: "â« To detachment",
    phase_at_detach: "âœ‚ï¸ Detachment at x=d!",
    phase_to_meeting: "ğŸ¯ Projectile motion",
    phase_meeting_done: "ğŸ’¥ Meeting!",
    eqLine: "Equilibrium (x=0)",
    natLine: "Natural length line (x=d)",
    arrowSystem: "System",
    arrowBall: "Ball",
    arrowHead: "Head",
    arrowDisk: "Disk",
    meetingBanner: "ğŸ’¥ MEETING!",
    endExcellent: "ğŸ‰ Excellent!",
    endGood: "ğŸ‘ Very good!",
    endOk: "ğŸ’ª Nice try!",
    endStudy: "ğŸ“– Needs practice",
    endScore: "Score",
    endAccuracy: "Accuracy",
    q_u0_title: "B1: Speed before collision",
    q_u0_q:
      "The system reaches the <strong>equilibrium position</strong> moving upward.<br>" +
      "What is the speed <code>uâ‚€</code> just <strong>before</strong> the collision?",
    q_u0_hint:
      "<p><strong>At equilibrium, displacement is x = 0</strong></p>" +
      "<p class='formula'>u = Ï‰ Â· âˆš(AÂ² - xÂ²)</p>" +
      "<p>So the speed is maximum:</p>" +
      "<p class='formula'>uâ‚€ = Ï‰ Â· Aâ‚€</p>" +
      "<p>Use: Ï‰ = 10 rad/s, Aâ‚€ = 0.5 m</p>",
    q_u1_title: "B2a: System speed after collision",
    q_u1_q:
      "The collision is <strong>elastic</strong>. The ball was initially at rest.<br>" +
      "What is the system speed <code>uâ‚'</code> right <strong>after</strong> the collision?<br>" +
      "<small>(Negative = downward)</small>",
    q_u1_hint:
      "<p><strong>Elastic collision formula:</strong></p>" +
      "<p class='formula'>uâ‚' = [(mâ‚+mâ‚‚) âˆ’ mâ‚ƒ] / [(mâ‚+mâ‚‚) + mâ‚ƒ] Ã— uâ‚€</p>" +
      "<p class='formula'>uâ‚' = (0.2 âˆ’ 0.4) / (0.2 + 0.4) Ã— uâ‚€</p>",
    q_u3_title: "B2b: Ball speed after collision",
    q_u3_q:
      "What is the ball speed <code>uâ‚ƒ'</code> right <strong>after</strong> the collision?<br>" +
      "<small>(Positive = upward)</small>",
    q_u3_hint:
      "<p class='formula'>uâ‚ƒ' = 2(mâ‚+mâ‚‚) / [(mâ‚+mâ‚‚) + mâ‚ƒ] Ã— uâ‚€</p>" +
      "<p class='formula'>uâ‚ƒ' = (2 Ã— 0.2) / 0.6 Ã— uâ‚€</p>",
    q_a1_title: "C1: New oscillation amplitude",
    q_a1_q:
      "After the collision, the system oscillates with a new amplitude.<br>" +
      "What is the <strong>amplitude Aâ‚</strong>?",
    q_a1_hint:
      "<p class='formula'>Aâ‚ = |uâ‚'| / Ï‰</p>",
    q_xdet_title: "C2a: Detachment position",
    q_xdet_q:
      "The head detaches when the normal force becomes zero.<br>" +
      "At what <strong>position x</strong> (from equilibrium) does detachment occur?",
    q_xdet_hint:
      "<p><strong>Condition:</strong> N = 0 â†’ a = -g</p>" +
      "<p class='formula'>x = d</p>",
    q_vdet_title: "C2b: Detachment speed",
    q_vdet_q:
      "What is the speed <code>u<sub>det</sub></code> at detachment?<br>" +
      "<small>(at x = d = 0.1 m)</small>",
    q_vdet_hint:
      "<p class='formula'>u<sub>det</sub> = Ï‰ Â· âˆš(Aâ‚Â² - dÂ²)</p>",
    q_ymeet_title: "D: Meeting height",
    q_ymeet_q:
      "After detachment, the head and the ball move as projectiles.<br>" +
      "At what <strong>height y</strong> (from equilibrium) do they meet?<br>" +
      "<small>t<sub>det</sub> â‰ˆ 0.38 s after the collision</small>",
    q_ymeet_hint:
      "<p><strong>Projectile equations (Ï„ from detachment):</strong></p>" +
      "<p class='formula'>Head: yâ‚‚ = d + u<sub>det</sub>Â·Ï„ âˆ’ Â½gÂ·Ï„Â²</p>" +
      "<p class='formula'>Ball: yâ‚ƒ = yâ‚ƒ,0 + uâ‚ƒÂ·Ï„ âˆ’ Â½gÂ·Ï„Â²</p>" +
      "<p>The âˆ’Â½gÏ„Â² terms cancel. Set yâ‚‚ = yâ‚ƒ and solve.</p>",
  },

  es: {
    phaseLabel: "FASE",
    scoreLabel: "PUNTOS",
    languageLabel: "Idioma",
    givenData: "Datos del problema",
    controls: "Controles",
    hintTitle: "Pista",
    slowLine: 'Movimiento en <strong style="color: var(--accent-cyan);">CÃMARA LENTA</strong> (Ã—0.12)',
    btnContinue: "â–¶ Continuar",
    btnReset: "â†º Reiniciar",
    inputPh: "Respuesta",
    btnCheck: "âœ“ Comprobar",
    btnHint: "ğŸ’¡ Quiero una pista",
    btnReveal: "ğŸ‘ Mostrar la respuesta (-10 puntos)",
    btnNext: "â–¶ Siguiente",
    progress: (i,n)=>`Pregunta ${i} de ${n}`,
    attemptsInfo: (n, hintShown)=>`Intentos: <strong>${n}</strong> | ${hintShown ? "ğŸ’¡ Pista mostrada" : "Tras un error â†’ pista"}`,
    enterNumber: "Â¡Introduce un nÃºmero, por favor!",
    wrong: (a,u)=>`âœ— Incorrecto. Tu respuesta: ${a} ${u}`,
    correct: (tol,u)=>`âœ“ Â¡Correcto! (tolerancia Â±${tol} ${u})`,
    hintInfo: "ğŸ’¡ Lee la pista e intÃ©ntalo otra vez.",
    revealInfo: (v,u)=>`ğŸ‘ La respuesta correcta es: <strong>${v} ${u}</strong><br><small>(-10 puntos por mostrarla)</small>`,
    introTitle: "ğŸª OperaciÃ³n: Lanzamiento del Payaso",
    introSubtitle: "OscilaciÃ³n â€¢ ColisiÃ³n elÃ¡stica â€¢ Desprendimiento â€¢ Movimiento vertical",
    introLangTitle: "ğŸŒ Idioma",
    introLangNote: "(Cambia toda la interfaz.)",
    introExerciseTitle: "ğŸ“– El problema",
    introExerciseText:
      "Dos resortes verticales sostienen un disco con la cabeza del payaso. " +
      "El sistema oscila y en el equilibrio choca elÃ¡sticamente con una bola en reposo. " +
      "DespuÃ©s del choque, la cabeza se desprende y mÃ¡s tarde se encuentra con la bola.",
    introScoringTitle: "ğŸ¯ PuntuaciÃ³n",
    introScoringText:
      "â€¢ <strong style='color: var(--accent-green);'>+20 puntos</strong> por cada respuesta correcta<br>" +
      "â€¢ <strong style='color: var(--accent-orange);'>Pista</strong> tras un error (sin penalizaciÃ³n)<br>" +
      "â€¢ <strong style='color: var(--accent-red);'>-10 puntos</strong> si revelas la respuesta<br><br>" +
      "PuntuaciÃ³n mÃ¡xima: <strong>140 puntos</strong> (7 preguntas)",
    startGame: "ğŸš€ Â¡Empezar!",
    endResultsTitle: "ğŸ“Š Resultados",
    endAnalysisTitle: "ğŸ“ Resumen de fÃ­sica",
    playAgain: "ğŸ”„ Jugar de nuevo",
    m1: "mâ‚ (disco)",
    m2: "mâ‚‚ (cabeza)",
    m3: "mâ‚ƒ (bola)",
    dLabel: "d (eqâ†’long. nat.)",
    a0Label: "Aâ‚€ (amplitud)",
    omegaG: "Ï‰, g",
    phase_idle: "En espera",
    phase_to_equilibrium: "â« Hacia el equilibrio",
    phase_at_collision: "ğŸ’¥ Â¡CHOQUE en el equilibrio!",
    phase_post_collision: "â¬â†— DespuÃ©s del choque",
    phase_show_amplitude: "ğŸ“ Nueva amplitud Aâ‚",
    phase_to_detach: "â« Hacia el desprendimiento",
    phase_at_detach: "âœ‚ï¸ Â¡Desprendimiento en x=d!",
    phase_to_meeting: "ğŸ¯ Movimiento de proyectiles",
    phase_meeting_done: "ğŸ’¥ Â¡Encuentro!",
    eqLine: "Equilibrio (x=0)",
    natLine: "Longitud natural (x=d)",
    arrowSystem: "Sistema",
    arrowBall: "Bola",
    arrowHead: "Cabeza",
    arrowDisk: "Disco",
    meetingBanner: "ğŸ’¥ Â¡ENCUENTRO!",
    endExcellent: "ğŸ‰ Â¡Excelente!",
    endGood: "ğŸ‘ Â¡Muy bien!",
    endOk: "ğŸ’ª Â¡Buen intento!",
    endStudy: "ğŸ“– Necesita prÃ¡ctica",
    endScore: "PuntuaciÃ³n",
    endAccuracy: "PrecisiÃ³n",
    q_u0_title: "B1: Velocidad antes del choque",
    q_u0_q:
      "El sistema pasa por la <strong>posiciÃ³n de equilibrio</strong> hacia arriba.<br>" +
      "Â¿CuÃ¡l es la velocidad <code>uâ‚€</code> justo <strong>antes</strong> del choque?",
    q_u0_hint:
      "<p><strong>En equilibrio: x = 0</strong></p>" +
      "<p class='formula'>uâ‚€ = Ï‰ Â· Aâ‚€</p>",
    q_u1_title: "B2a: Velocidad del sistema despuÃ©s",
    q_u1_q:
      "Choque <strong>elÃ¡stico</strong>; la bola estaba en reposo.<br>" +
      "Â¿CuÃ¡l es <code>uâ‚'</code> del sistema <strong>despuÃ©s</strong> del choque?<br>" +
      "<small>(Negativo = hacia abajo)</small>",
    q_u1_hint:
      "<p class='formula'>uâ‚' = [(mâ‚+mâ‚‚) âˆ’ mâ‚ƒ] / [(mâ‚+mâ‚‚) + mâ‚ƒ] Â· uâ‚€</p>",
    q_u3_title: "B2b: Velocidad de la bola despuÃ©s",
    q_u3_q:
      "Â¿CuÃ¡l es <code>uâ‚ƒ'</code> de la bola <strong>despuÃ©s</strong> del choque?<br>" +
      "<small>(Positivo = hacia arriba)</small>",
    q_u3_hint:
      "<p class='formula'>uâ‚ƒ' = 2(mâ‚+mâ‚‚) / [(mâ‚+mâ‚‚) + mâ‚ƒ] Â· uâ‚€</p>",
    q_a1_title: "C1: Nueva amplitud",
    q_a1_q:
      "Tras el choque, el sistema oscila con una nueva amplitud.<br>" +
      "Â¿CuÃ¡l es la <strong>amplitud Aâ‚</strong>?",
    q_a1_hint:
      "<p class='formula'>Aâ‚ = |uâ‚'| / Ï‰</p>",
    q_xdet_title: "C2a: PosiciÃ³n de desprendimiento",
    q_xdet_q:
      "La cabeza se desprende cuando la normal se hace cero.<br>" +
      "Â¿En quÃ© <strong>x</strong> (desde el equilibrio) ocurre el desprendimiento?",
    q_xdet_hint:
      "<p class='formula'>x = d</p>",
    q_vdet_title: "C2b: Velocidad al desprenderse",
    q_vdet_q:
      "Â¿CuÃ¡l es la velocidad al desprenderse?<br><small>(en x = d = 0.1 m)</small>",
    q_vdet_hint:
      "<p class='formula'>u = Ï‰ Â· âˆš(Aâ‚Â² âˆ’ dÂ²)</p>",
    q_ymeet_title: "D: Altura de encuentro",
    q_ymeet_q:
      "Tras el desprendimiento, cabeza y bola son proyectiles.<br>" +
      "Â¿A quÃ© <strong>altura y</strong> (desde el equilibrio) se encuentran?",
    q_ymeet_hint:
      "<p>Los tÃ©rminos âˆ’Â½gÏ„Â² se cancelan al igualar yâ‚‚=yâ‚ƒ. Resuelve Ï„ y luego y.</p>",
  },

  it: {
    phaseLabel: "FASE",
    scoreLabel: "PUNTEGGIO",
    languageLabel: "Lingua",
    givenData: "Dati del problema",
    controls: "Controlli",
    hintTitle: "Suggerimento",
    slowLine: 'Movimento in <strong style="color: var(--accent-cyan);">RALLENTATORE</strong> (Ã—0.12)',
    btnContinue: "â–¶ Continua",
    btnReset: "â†º Reimposta",
    inputPh: "Risposta",
    btnCheck: "âœ“ Verifica",
    btnHint: "ğŸ’¡ Voglio un suggerimento",
    btnReveal: "ğŸ‘ Mostra la risposta (-10 punti)",
    btnNext: "â–¶ Avanti",
    progress: (i,n)=>`Domanda ${i} di ${n}`,
    attemptsInfo: (n, hintShown)=>`Tentativi: <strong>${n}</strong> | ${hintShown ? "ğŸ’¡ Suggerimento mostrato" : "Dopo un errore â†’ suggerimento"}`,
    enterNumber: "Inserisci un numero!",
    wrong: (a,u)=>`âœ— Sbagliato! La tua risposta: ${a} ${u}`,
    correct: (tol,u)=>`âœ“ Corretto! (tolleranza Â±${tol} ${u})`,
    hintInfo: "ğŸ’¡ Leggi il suggerimento e riprova!",
    revealInfo: (v,u)=>`ğŸ‘ La risposta corretta Ã¨: <strong>${v} ${u}</strong><br><small>(-10 punti)</small>`,
    introTitle: "ğŸª Operazione: Lancio del Clown",
    introSubtitle: "Oscillazione â€¢ Urto elastico â€¢ Distacco â€¢ Moto verticale",
    introLangTitle: "ğŸŒ Lingua",
    introLangNote: "(Cambia tutta lâ€™interfaccia.)",
    introExerciseTitle: "ğŸ“– Il problema",
    introExerciseText:
      "Due molle verticali sostengono un disco con la testa del clown. " +
      "Il sistema oscilla e allâ€™equilibrio urta elasticamente una sfera in attesa. " +
      "Dopo lâ€™urto, la testa si stacca e piÃ¹ tardi incontra la sfera.",
    introScoringTitle: "ğŸ¯ Punteggio",
    introScoringText:
      "â€¢ <strong style='color: var(--accent-green);'>+20 punti</strong> per ogni risposta corretta<br>" +
      "â€¢ <strong style='color: var(--accent-orange);'>Suggerimento</strong> dopo un errore (senza penalitÃ )<br>" +
      "â€¢ <strong style='color: var(--accent-red);'>-10 punti</strong> se mostri la risposta<br><br>" +
      "Punteggio massimo: <strong>140 punti</strong> (7 domande)",
    startGame: "ğŸš€ Inizia!",
    endResultsTitle: "ğŸ“Š Risultati",
    endAnalysisTitle: "ğŸ“ Riepilogo di fisica",
    playAgain: "ğŸ”„ Gioca di nuovo",
    m1: "mâ‚ (disco)",
    m2: "mâ‚‚ (testa)",
    m3: "mâ‚ƒ (sfera)",
    dLabel: "d (eqâ†’lung. nat.)",
    a0Label: "Aâ‚€ (ampiezza)",
    omegaG: "Ï‰, g",
    phase_idle: "In attesa",
    phase_to_equilibrium: "â« Verso equilibrio",
    phase_at_collision: "ğŸ’¥ URTO allâ€™equilibrio!",
    phase_post_collision: "â¬â†— Dopo lâ€™urto",
    phase_show_amplitude: "ğŸ“ Nuova ampiezza Aâ‚",
    phase_to_detach: "â« Verso distacco",
    phase_at_detach: "âœ‚ï¸ Distacco a x=d!",
    phase_to_meeting: "ğŸ¯ Moto di proiettili",
    phase_meeting_done: "ğŸ’¥ Incontro!",
    eqLine: "Equilibrio (x=0)",
    natLine: "Linea lunghezza naturale (x=d)",
    arrowSystem: "Sistema",
    arrowBall: "Sfera",
    arrowHead: "Testa",
    arrowDisk: "Disco",
    meetingBanner: "ğŸ’¥ INCONTRO!",
    endExcellent: "ğŸ‰ Eccellente!",
    endGood: "ğŸ‘ Molto bene!",
    endOk: "ğŸ’ª Buon tentativo!",
    endStudy: "ğŸ“– Serve pratica",
    endScore: "Punteggio",
    endAccuracy: "Accuratezza",
    q_u0_title: "B1: VelocitÃ  prima dellâ€™urto",
    q_u0_q:
      "Il sistema passa per lâ€™<strong>equilibrio</strong> verso lâ€™alto.<br>" +
      "Qual Ã¨ la velocitÃ  <code>uâ‚€</code> appena <strong>prima</strong> dellâ€™urto?",
    q_u0_hint:
      "<p class='formula'>uâ‚€ = Ï‰ Â· Aâ‚€</p>",
    q_u1_title: "B2a: VelocitÃ  del sistema dopo",
    q_u1_q:
      "Urto <strong>elastico</strong>, sfera inizialmente ferma.<br>" +
      "Qual Ã¨ <code>uâ‚'</code> del sistema dopo lâ€™urto?<br><small>(Negativo = verso il basso)</small>",
    q_u1_hint:
      "<p class='formula'>uâ‚' = [(mâ‚+mâ‚‚) âˆ’ mâ‚ƒ] / [(mâ‚+mâ‚‚) + mâ‚ƒ] Â· uâ‚€</p>",
    q_u3_title: "B2b: VelocitÃ  della sfera dopo",
    q_u3_q:
      "Qual Ã¨ <code>uâ‚ƒ'</code> della sfera dopo lâ€™urto?<br><small>(Positivo = verso lâ€™alto)</small>",
    q_u3_hint:
      "<p class='formula'>uâ‚ƒ' = 2(mâ‚+mâ‚‚) / [(mâ‚+mâ‚‚) + mâ‚ƒ] Â· uâ‚€</p>",
    q_a1_title: "C1: Nuova ampiezza",
    q_a1_q: "Qual Ã¨ lâ€™<strong>ampiezza Aâ‚</strong> dopo lâ€™urto?",
    q_a1_hint: "<p class='formula'>Aâ‚ = |uâ‚'| / Ï‰</p>",
    q_xdet_title: "C2a: Posizione di distacco",
    q_xdet_q: "A quale <strong>x</strong> (da eq) avviene il distacco?",
    q_xdet_hint: "<p class='formula'>x = d</p>",
    q_vdet_title: "C2b: VelocitÃ  di distacco",
    q_vdet_q: "Qual Ã¨ la velocitÃ  al distacco?<br><small>(x = d = 0.1 m)</small>",
    q_vdet_hint: "<p class='formula'>u = Ï‰ Â· âˆš(Aâ‚Â² âˆ’ dÂ²)</p>",
    q_ymeet_title: "D: Altezza dâ€™incontro",
    q_ymeet_q: "A quale <strong>altezza y</strong> (da eq) si incontrano?",
    q_ymeet_hint: "<p>Uguagliando yâ‚‚=yâ‚ƒ, i termini âˆ’Â½gÏ„Â² si cancellano.</p>",
  },

  fi: {
    phaseLabel: "VAIHE",
    scoreLabel: "PISTEET",
    languageLabel: "Kieli",
    givenData: "TehtÃ¤vÃ¤n tiedot",
    controls: "Ohjaus",
    hintTitle: "Vihje",
    slowLine: 'Liike <strong style="color: var(--accent-cyan);">HIDASTUKSELLA</strong> (Ã—0.12)',
    btnContinue: "â–¶ Jatka",
    btnReset: "â†º Nollaa",
    inputPh: "Vastaus",
    btnCheck: "âœ“ Tarkista",
    btnHint: "ğŸ’¡ Haluan vihjeen",
    btnReveal: "ğŸ‘ NÃ¤ytÃ¤ vastaus (-10 pistettÃ¤)",
    btnNext: "â–¶ Seuraava",
    progress: (i,n)=>`Kysymys ${i} / ${n}`,
    attemptsInfo: (n, hintShown)=>`Yritykset: <strong>${n}</strong> | ${hintShown ? "ğŸ’¡ Vihje nÃ¤ytetty" : "Virheen jÃ¤lkeen â†’ vihje"}`,
    enterNumber: "SyÃ¶tÃ¤ numero!",
    wrong: (a,u)=>`âœ— VÃ¤Ã¤rin! Vastauksesi: ${a} ${u}`,
    correct: (tol,u)=>`âœ“ Oikein! (toleranssi Â±${tol} ${u})`,
    hintInfo: "ğŸ’¡ Lue vihje ja yritÃ¤ uudelleen!",
    revealInfo: (v,u)=>`ğŸ‘ Oikea vastaus: <strong>${v} ${u}</strong><br><small>(-10 pistettÃ¤)</small>`,
    introTitle: "ğŸª Operaatio: Klovni Laukaisu",
    introSubtitle: "VÃ¤rÃ¤htely â€¢ Elastinen tÃ¶rmÃ¤ys â€¢ Irtoaminen â€¢ Pystysuora liike",
    introLangTitle: "ğŸŒ Kieli",
    introLangNote: "(Vaihtaa koko kÃ¤yttÃ¶liittymÃ¤n.)",
    introExerciseTitle: "ğŸ“– TehtÃ¤vÃ¤",
    introExerciseText:
      "Kaksi pystysuoraa jousta kannattelee levyÃ¤ ja klovnin pÃ¤Ã¤tÃ¤. " +
      "JÃ¤rjestelmÃ¤ vÃ¤rÃ¤htelee ja tasapainossa tÃ¶rmÃ¤Ã¤ elastisesti paikallaan olevaan palloon. " +
      "TÃ¶rmÃ¤yksen jÃ¤lkeen pÃ¤Ã¤ irtoaa ja myÃ¶hemmin kohtaa pallon.",
    introScoringTitle: "ğŸ¯ Pisteytys",
    introScoringText:
      "â€¢ <strong style='color: var(--accent-green);'>+20 pistettÃ¤</strong> oikeasta vastauksesta<br>" +
      "â€¢ <strong style='color: var(--accent-orange);'>Vihje</strong> virheen jÃ¤lkeen (ei rangaistusta)<br>" +
      "â€¢ <strong style='color: var(--accent-red);'>-10 pistettÃ¤</strong> jos nÃ¤ytÃ¤t vastauksen<br><br>" +
      "Maksimi: <strong>140 pistettÃ¤</strong> (7 kysymystÃ¤)",
    startGame: "ğŸš€ Aloita!",
    endResultsTitle: "ğŸ“Š Tulokset",
    endAnalysisTitle: "ğŸ“ Fysiikan yhteenveto",
    playAgain: "ğŸ”„ Pelaa uudestaan",
    m1: "mâ‚ (levy)",
    m2: "mâ‚‚ (pÃ¤Ã¤)",
    m3: "mâ‚ƒ (pallo)",
    dLabel: "d (tasap.â†’luonn.)",
    a0Label: "Aâ‚€ (amplitudi)",
    omegaG: "Ï‰, g",
    phase_idle: "Odotus",
    phase_to_equilibrium: "â« Tasapainoon",
    phase_at_collision: "ğŸ’¥ TÃ–RMÃ„YS tasapainossa!",
    phase_post_collision: "â¬â†— TÃ¶rmÃ¤yksen jÃ¤lkeen",
    phase_show_amplitude: "ğŸ“ Uusi amplitudi Aâ‚",
    phase_to_detach: "â« Irtoamiseen",
    phase_at_detach: "âœ‚ï¸ Irtoaminen x=d!",
    phase_to_meeting: "ğŸ¯ Heittoliike",
    phase_meeting_done: "ğŸ’¥ Kohtaaminen!",
    eqLine: "Tasapaino (x=0)",
    natLine: "Luonnollinen pituus (x=d)",
    arrowSystem: "JÃ¤rjestelmÃ¤",
    arrowBall: "Pallo",
    arrowHead: "PÃ¤Ã¤",
    arrowDisk: "Levy",
    meetingBanner: "ğŸ’¥ KOHTAAMINEN!",
    endExcellent: "ğŸ‰ Erinomaista!",
    endGood: "ğŸ‘ Hyvin tehty!",
    endOk: "ğŸ’ª HyvÃ¤ yritys!",
    endStudy: "ğŸ“– Tarvitsee harjoitusta",
    endScore: "Pisteet",
    endAccuracy: "Tarkkuus",
    q_u0_title: "B1: Nopeus ennen tÃ¶rmÃ¤ystÃ¤",
    q_u0_q:
      "JÃ¤rjestelmÃ¤ kulkee <strong>tasapainon</strong> kautta ylÃ¶spÃ¤in.<br>" +
      "MikÃ¤ on nopeus <code>uâ‚€</code> juuri <strong>ennen</strong> tÃ¶rmÃ¤ystÃ¤?",
    q_u0_hint:
      "<p class='formula'>uâ‚€ = Ï‰ Â· Aâ‚€</p>",
    q_u1_title: "B2a: JÃ¤rjestelmÃ¤n nopeus jÃ¤lkeen",
    q_u1_q:
      "TÃ¶rmÃ¤ys on <strong>elastinen</strong>. Pallo oli aluksi levossa.<br>" +
      "MikÃ¤ on <code>uâ‚'</code> tÃ¶rmÃ¤yksen jÃ¤lkeen?<br><small>(Negatiivinen = alaspÃ¤in)</small>",
    q_u1_hint:
      "<p class='formula'>uâ‚' = [(mâ‚+mâ‚‚) âˆ’ mâ‚ƒ] / [(mâ‚+mâ‚‚) + mâ‚ƒ] Â· uâ‚€</p>",
    q_u3_title: "B2b: Pallon nopeus jÃ¤lkeen",
    q_u3_q:
      "MikÃ¤ on pallon nopeus <code>uâ‚ƒ'</code> tÃ¶rmÃ¤yksen jÃ¤lkeen?<br><small>(Positiivinen = ylÃ¶spÃ¤in)</small>",
    q_u3_hint:
      "<p class='formula'>uâ‚ƒ' = 2(mâ‚+mâ‚‚) / [(mâ‚+mâ‚‚) + mâ‚ƒ] Â· uâ‚€</p>",
    q_a1_title: "C1: Uusi amplitudi",
    q_a1_q: "MikÃ¤ on <strong>amplitudi Aâ‚</strong> tÃ¶rmÃ¤yksen jÃ¤lkeen?",
    q_a1_hint: "<p class='formula'>Aâ‚ = |uâ‚'| / Ï‰</p>",
    q_xdet_title: "C2a: Irtoamiskohta",
    q_xdet_q: "MissÃ¤ <strong>x</strong>:ssÃ¤ irtoaminen tapahtuu?",
    q_xdet_hint: "<p class='formula'>x = d</p>",
    q_vdet_title: "C2b: Irtoamisnopeus",
    q_vdet_q: "MikÃ¤ on nopeus irtoamishetkellÃ¤?<br><small>(x = d = 0.1 m)</small>",
    q_vdet_hint: "<p class='formula'>u = Ï‰ Â· âˆš(Aâ‚Â² âˆ’ dÂ²)</p>",
    q_ymeet_title: "D: Kohtaamiskorkeus",
    q_ymeet_q: "MillÃ¤ <strong>korkeudella y</strong> ne kohtaavat?",
    q_ymeet_hint: "<p>Termit âˆ’Â½gÏ„Â² kumoutuvat, kun asetat yâ‚‚=yâ‚ƒ.</p>",
  }
};

let currentLang = "el";
function T(){ return I18N[currentLang] || I18N.el; }
function t(key){ const v = T()[key]; return v !== undefined ? v : (I18N.el[key] !== undefined ? I18N.el[key] : key); }

/* =====================================================
   PHYSICS CONSTANTS (SI units)
===================================================== */
const M1 = 0.1, M2 = 0.1, M3 = 0.4;
const M_SYS = M1 + M2;
const D = 0.1;
const G = 10;
const A0 = 0.5;
const K_TOTAL = (M_SYS * G) / D;
const OMEGA = Math.sqrt(K_TOTAL / M_SYS);

// Theoretical values
const U0 = OMEGA * A0;
const U1_AFTER = ((M_SYS - M3) / (M_SYS + M3)) * U0;
const U3_AFTER = (2 * M_SYS / (M_SYS + M3)) * U0;
const A1 = Math.abs(U1_AFTER) / OMEGA;
const T_DETACH = (Math.PI + Math.asin(D / A1)) / OMEGA;
const V_DETACH = OMEGA * Math.sqrt(A1*A1 - D*D);

// Meeting
const Y_BALL_AT_DETACH = U3_AFTER * T_DETACH - 0.5 * G * T_DETACH * T_DETACH;
const V_BALL_AT_DETACH = U3_AFTER - G * T_DETACH;
const TAU_MEET = (Y_BALL_AT_DETACH - D) / (V_DETACH - V_BALL_AT_DETACH);
const Y_MEET = D + V_DETACH * TAU_MEET - 0.5 * G * TAU_MEET * TAU_MEET;

/* =====================================================
   GAME STATE
===================================================== */
let state = {
  animState: 'idle',
  t: 0,
  x: -A0,
  v: 0,
  amplitude: A0,

  ballY: 0,
  ballV: 0,
  ballActive: false,

  headY: 0,
  headV: 0,
  headDetached: false,

  diskX: 0,
  diskV: 0,

  currentQuestion: 0,
  score: 0,
  attempts: 0,
  hintShown: false,
  answerRevealed: false,

  slowMotion: 0.12,
  running: false
};

/* =====================================================
   QUESTIONS (text via I18N)
===================================================== */
const QUESTIONS = [
  {
    id: 'u0',
    title: ()=>t('q_u0_title'),
    question: ()=>t('q_u0_q'),
    unit: 'm/s',
    answer: U0,
    tolerance: 0.15,
    hint: ()=>t('q_u0_hint'),
    setupState: () => {
      state.animState = 'to_equilibrium';
      state.t = 0;
      state.x = -A0;
      state.v = 0;
      state.ballActive = false;
      state.headDetached = false;
    },
    freezeCondition: () => state.x >= -0.01 && state.v > 0,
    onFreeze: () => { state.x = 0; state.v = U0; state.animState = 'at_collision'; }
  },
  {
    id: 'u1',
    title: ()=>t('q_u1_title'),
    question: ()=>t('q_u1_q'),
    unit: 'm/s',
    answer: U1_AFTER,
    tolerance: 0.15,
    hint: ()=>t('q_u1_hint'),
    setupState: () => {
      state.x = 0;
      state.v = U1_AFTER;
      state.ballY = 0;
      state.ballV = U3_AFTER;
      state.ballActive = true;
      state.t = 0;
      state.animState = 'post_collision';
    },
    freezeCondition: () => true,
    onFreeze: () => {}
  },
  {
    id: 'u3',
    title: ()=>t('q_u3_title'),
    question: ()=>t('q_u3_q'),
    unit: 'm/s',
    answer: U3_AFTER,
    tolerance: 0.15,
    hint: ()=>t('q_u3_hint'),
    setupState: () => {
      state.x = 0;
      state.v = U1_AFTER;
      state.ballY = 0;
      state.ballV = U3_AFTER;
      state.ballActive = true;
      state.t = 0;
      state.animState = 'post_collision';
    },
    freezeCondition: () => true,
    onFreeze: () => {}
  },
  {
    id: 'a1',
    title: ()=>t('q_a1_title'),
    question: ()=>t('q_a1_q'),
    unit: 'm',
    answer: A1,
    tolerance: 0.02,
    hint: ()=>t('q_a1_hint'),
    setupState: () => {
      state.t = 0;
      state.amplitude = A1;
      state.ballActive = true;
      state.animState = 'post_collision';
    },
    freezeCondition: () => state.t > 0.1 && state.x <= -A1 + 0.01,
    onFreeze: () => { state.x = -A1; state.v = 0; }
  },
  {
    id: 'x_detach',
    title: ()=>t('q_xdet_title'),
    question: ()=>t('q_xdet_q'),
    unit: 'm',
    answer: D,
    tolerance: 0.02,
    hint: ()=>t('q_xdet_hint'),
    setupState: () => {
      state.t = 0;
      state.amplitude = A1;
      state.x = -A1;
      state.v = 0;
      state.ballActive = true;
      state.headDetached = false;
      state.animState = 'to_detach';
    },
    freezeCondition: () => state.x >= D - 0.008 && state.v > 0,
    onFreeze: () => { state.x = D; state.v = V_DETACH; state.animState = 'at_detach'; }
  },
  {
    id: 'v_detach',
    title: ()=>t('q_vdet_title'),
    question: ()=>t('q_vdet_q'),
    unit: 'm/s',
    answer: V_DETACH,
    tolerance: 0.1,
    hint: ()=>t('q_vdet_hint'),
    setupState: () => {
      state.x = D;
      state.v = V_DETACH;
      state.headDetached = false;
      state.ballActive = true;
      state.ballY = Y_BALL_AT_DETACH;
      state.ballV = V_BALL_AT_DETACH;
      state.animState = 'at_detach';
      state.t = 0;
    },
    freezeCondition: () => true,
    onFreeze: () => {}
  },
  {
    id: 'y_meet',
    title: ()=>t('q_ymeet_title'),
    question: ()=>t('q_ymeet_q'),
    unit: 'm',
    answer: Y_MEET,
    tolerance: 0.05,
    hint: ()=>t('q_ymeet_hint'),
    setupState: () => {
      state.headDetached = true;
      state.headY = D;
      state.headV = V_DETACH;
      state.diskX = D;
      state.diskV = V_DETACH;
      state.ballY = Y_BALL_AT_DETACH;
      state.ballV = V_BALL_AT_DETACH;
      state.t = 0;
      state.ballActive = true;
      state.animState = 'to_meeting';
    },
    freezeCondition: () => Math.abs(state.headY - state.ballY) < 0.04,
    onFreeze: () => { state.headY = Y_MEET; state.ballY = Y_MEET; state.animState = 'meeting_done'; }
  }
];

/* =====================================================
   DOM HELPERS
===================================================== */
const $ = (id)=>document.getElementById(id);
const canvas = $('canvas');
const ctx = canvas.getContext('2d');
const W = canvas.width, H = canvas.height;
const PPM = 320;
const CX = W / 2;
const FLOOR_Y = H - 50;
const EQ_Y = FLOOR_Y - 200;
const NAT_Y = EQ_Y - D * PPM;

function yToPx(y){ return EQ_Y - y * PPM; }

/* =====================================================
   UI (I18N apply)
===================================================== */
function applyI18NStatic(){
  $('lblPhase').textContent = t('phaseLabel');
  $('lblScore').textContent = t('scoreLabel');
  $('lblLanguage').textContent = t('languageLabel');
  $('lblGivenData').textContent = t('givenData');
  $('lblControls').textContent = t('controls');
  $('lblHintTitle').textContent = t('hintTitle');

  $('lblM1').textContent = t('m1');
  $('lblM2').textContent = t('m2');
  $('lblM3').textContent = t('m3');
  $('lblD').textContent = t('dLabel');
  $('lblA0').textContent = t('a0Label');
  $('lblOmegaG').textContent = t('omegaG');

  $('btnStart').textContent = t('btnContinue');
  $('btnReset').textContent = t('btnReset');
  $('lblSlowLine').innerHTML = t('slowLine');

  $('quizInput').setAttribute('placeholder', t('inputPh'));
  $('btnCheck').textContent = t('btnCheck');
  $('btnHint').textContent = t('btnHint');
  $('btnReveal').textContent = t('btnReveal');
  $('btnNext').textContent = t('btnNext');

  $('introTitle').textContent = t('introTitle');
  $('introSubtitle').textContent = t('introSubtitle');
  $('introLangTitle').textContent = t('introLangTitle');
  $('introLangNote').textContent = t('introLangNote');
  $('introExerciseTitle').textContent = t('introExerciseTitle');
  $('introExerciseText').textContent = "";
  $('introExerciseText').innerHTML = t('introExerciseText');
  $('introScoringTitle').textContent = t('introScoringTitle');
  $('introScoringText').innerHTML = t('introScoringText');
  $('btnStartGame').textContent = t('startGame');

  $('endResultsTitle').textContent = t('endResultsTitle');
  $('endAnalysisTitle').textContent = t('endAnalysisTitle');
  $('btnPlayAgain').textContent = t('playAgain');

  updateProgress(state.currentQuestion);
  updateAttemptsInfo();
  updatePhaseDisplay();
  refreshQuestionText();
}

function setLanguage(lang){
  if(!I18N[lang]) lang = "el";
  currentLang = lang;
  if($('langSelect') && $('langSelect').value !== lang) $('langSelect').value = lang;
  if($('langSelectIntro') && $('langSelectIntro').value !== lang) $('langSelectIntro').value = lang;
  applyI18NStatic();
}

function refreshQuestionText(){
  const q = QUESTIONS[state.currentQuestion];
  if(!q) return;
  $('quizTitle').textContent = q.title();
  $('quizQuestion').innerHTML = q.question();
  $('quizUnit').textContent = q.unit;
  // update hint content if visible
  if(!$('hintBox').classList.contains('hidden')){
    $('hintContent').innerHTML = q.hint();
    $('lblHintTitle').textContent = t('hintTitle');
  }
}

/* =====================================================
   QUIZ LOGIC
===================================================== */
function showQuestion(index) {
  if (index >= QUESTIONS.length) { endGame(); return; }
  const q = QUESTIONS[index];

  state.currentQuestion = index;
  state.attempts = 0;
  state.hintShown = false;
  state.answerRevealed = false;

  $('quizTitle').textContent = q.title();
  $('quizQuestion').innerHTML = q.question();
  $('quizUnit').textContent = q.unit;
  $('quizInput').value = '';
  $('feedback').classList.add('hidden');
  $('hintBox').classList.add('hidden');
  $('btnCheck').classList.remove('hidden');
  $('btnHint').classList.add('hidden');
  $('btnReveal').classList.add('hidden');
  $('btnNext').classList.add('hidden');

  q.setupState();
  state.running = true;

  updateProgress(index);
  updateAttemptsInfo();
  updatePhaseDisplay();
}

function checkAnswer() {
  const q = QUESTIONS[state.currentQuestion];
  const raw = $('quizInput').value;
  const userAnswer = parseFloat(raw);

  if (isNaN(userAnswer)) { showFeedback('wrong', t('enterNumber')); return; }

  state.attempts++;
  const diff = Math.abs(userAnswer - q.answer);
  const correct = diff <= q.tolerance;

  if (correct) {
    if (!state.answerRevealed) {
      state.score += 20;
      $('scoreDisplay').textContent = state.score;
    }
    showFeedback('correct', t('correct')(q.tolerance.toFixed(2), q.unit));

    const step = $(`step${state.currentQuestion + 1}`);
    step.classList.remove('active');
    step.classList.add('done');
    step.textContent = 'âœ“';

    $('btnCheck').classList.add('hidden');
    $('btnHint').classList.add('hidden');
    $('btnReveal').classList.add('hidden');
    $('btnNext').classList.remove('hidden');
  } else {
    showFeedback('wrong', t('wrong')(userAnswer.toFixed(2), q.unit));
    if (!state.hintShown) $('btnHint').classList.remove('hidden');
    else if (!state.answerRevealed) $('btnReveal').classList.remove('hidden');
  }

  updateAttemptsInfo();
}

function showHint() {
  const q = QUESTIONS[state.currentQuestion];
  state.hintShown = true;

  $('hintContent').innerHTML = q.hint();
  $('hintBox').classList.remove('hidden');
  $('btnHint').classList.add('hidden');
  $('btnReveal').classList.remove('hidden');

  showFeedback('info', t('hintInfo'));
  updateAttemptsInfo();
}

function revealAnswer() {
  const q = QUESTIONS[state.currentQuestion];
  state.answerRevealed = true;
  state.score = Math.max(0, state.score - 10);
  $('scoreDisplay').textContent = state.score;

  showFeedback('info', t('revealInfo')(q.answer.toFixed(3), q.unit));

  $('btnCheck').classList.add('hidden');
  $('btnReveal').classList.add('hidden');
  $('btnNext').classList.remove('hidden');

  const step = $(`step${state.currentQuestion + 1}`);
  step.classList.remove('active');
  step.style.background = 'var(--accent-orange)';
  step.style.borderColor = 'var(--accent-orange)';
}

function nextQuestion(){ showQuestion(state.currentQuestion + 1); }

function showFeedback(type, message) {
  const fb = $('feedback');
  fb.className = `feedback ${type}`;
  fb.innerHTML = message;
  fb.classList.remove('hidden');
}

function updateAttemptsInfo() {
  $('attemptsInfo').innerHTML = t('attemptsInfo')(state.attempts, state.hintShown);
}

function updateProgress(index) {
  for (let i = 1; i <= 7; i++) {
    const step = $(`step${i}`);
    if (!step) continue;
    if (i < index + 1) { step.classList.add('done'); step.classList.remove('active'); }
    else if (i === index + 1) { step.classList.add('active'); step.classList.remove('done'); }
    else { step.classList.remove('active', 'done'); }
  }
  $('progressFill').style.width = `${(index / 7) * 100}%`;
  $('progressText').textContent = t('progress')(index + 1, 7);
}

function updatePhaseDisplay() {
  const map = {
    'idle': t('phase_idle'),
    'to_equilibrium': t('phase_to_equilibrium'),
    'at_collision': t('phase_at_collision'),
    'post_collision': t('phase_post_collision'),
    'show_amplitude': t('phase_show_amplitude'),
    'to_detach': t('phase_to_detach'),
    'at_detach': t('phase_at_detach'),
    'to_meeting': t('phase_to_meeting'),
    'meeting_done': t('phase_meeting_done')
  };
  $('phaseDisplay').textContent = map[state.animState] || state.animState;
}

/* =====================================================
   PHYSICS UPDATE
===================================================== */
function update(dt) {
  dt *= state.slowMotion;
  if (!state.running) return;

  const q = QUESTIONS[state.currentQuestion];
  if (!q) return;

  state.t += dt;

  switch (state.animState) {
    case 'to_equilibrium':
      state.x = -A0 * Math.cos(OMEGA * state.t);
      state.v = A0 * OMEGA * Math.sin(OMEGA * state.t);
      if (q.freezeCondition()) { q.onFreeze(); state.running = false; updatePhaseDisplay(); }
      break;

    case 'post_collision':
    case 'show_amplitude':
      state.x = -A1 * Math.sin(OMEGA * state.t);
      state.v = -A1 * OMEGA * Math.cos(OMEGA * state.t);
      state.ballY = U3_AFTER * state.t - 0.5 * G * state.t * state.t;
      state.ballV = U3_AFTER - G * state.t;
      if (q.freezeCondition()) { q.onFreeze(); state.running = false; updatePhaseDisplay(); }
      break;

    case 'to_detach':
      state.x = -A1 * Math.cos(OMEGA * state.t);
      state.v = A1 * OMEGA * Math.sin(OMEGA * state.t);

      // ball after collision, time shifted so that when x reaches 0 first time, tâ‰ˆÏ€/2Ï‰
      const tFromCollision = Math.PI / (2 * OMEGA) + state.t;
      state.ballY = U3_AFTER * tFromCollision - 0.5 * G * tFromCollision * tFromCollision;
      state.ballV = U3_AFTER - G * tFromCollision;

      if (q.freezeCondition()) { q.onFreeze(); state.running = false; updatePhaseDisplay(); }
      break;

    case 'to_meeting':
      const tDet = state.t;
      state.headY = D + V_DETACH * tDet - 0.5 * G * tDet * tDet;
      state.headV = V_DETACH - G * tDet;

      state.ballY = Y_BALL_AT_DETACH + V_BALL_AT_DETACH * tDet - 0.5 * G * tDet * tDet;
      state.ballV = V_BALL_AT_DETACH - G * tDet;

      // Visual-only: disk continues a small oscillation (not assessed by quiz)
      state.diskX = D * Math.cos(OMEGA * tDet);
      state.diskV = -D * OMEGA * Math.sin(OMEGA * tDet);

      if (q.freezeCondition()) { q.onFreeze(); state.running = false; updatePhaseDisplay(); }
      break;
  }
}

/* =====================================================
   DRAWING (keeps previous visual fixes)
===================================================== */
function drawLine(y, color, label) {
  ctx.strokeStyle = color;
  ctx.lineWidth = 2;
  ctx.setLineDash([8, 5]);
  ctx.beginPath();
  ctx.moveTo(40, y);
  ctx.lineTo(W - 40, y);
  ctx.stroke();
  ctx.setLineDash([]);

  ctx.fillStyle = color;
  ctx.font = '12px system-ui';
  ctx.textAlign = 'left';
  ctx.fillText(label, 50, y - 8);
}

function drawSpring(x1, y1, x2, y2) {
  const coils = 14, amp = 12;
  const len = Math.abs(y2 - y1);
  const nat = 150;

  ctx.strokeStyle = len < nat * 0.85 ? '#FF6B6B' : len > nat * 1.15 ? '#4ECDC4' : 'rgba(255,255,255,0.6)';
  ctx.lineWidth = 3;
  ctx.beginPath();
  ctx.moveTo(x1, y1);

  const dy = (y2 - y1) / coils;
  for (let i = 1; i < coils; i++) ctx.lineTo(x1 + (i % 2 === 0 ? -amp : amp), y1 + dy * i);
  ctx.lineTo(x2, y2);
  ctx.stroke();

  ctx.fillStyle = '#666';
  ctx.beginPath();
  ctx.arc(x1, y1, 6, 0, Math.PI * 2);
  ctx.arc(x2, y2, 6, 0, Math.PI * 2);
  ctx.fill();
}

function drawClownHead(cx, cy) {
  ctx.save();
  ctx.translate(cx, cy);

  const grad = ctx.createRadialGradient(0, -5, 5, 0, 0, 28);
  grad.addColorStop(0, '#FFE4C4');
  grad.addColorStop(1, '#FFD2A8');
  ctx.fillStyle = grad;
  ctx.beginPath();
  ctx.arc(0, 0, 28, 0, Math.PI * 2);
  ctx.fill();

  ctx.fillStyle = '#ff2d2d';
  ctx.beginPath();
  ctx.arc(0, 6, 9, 0, Math.PI * 2);
  ctx.fill();

  ctx.fillStyle = '#121212';
  ctx.beginPath();
  ctx.arc(-11, -6, 4, 0, Math.PI * 2);
  ctx.arc(11, -6, 4, 0, Math.PI * 2);
  ctx.fill();

  ctx.strokeStyle = '#ff4a7a';
  ctx.lineWidth = 3;
  ctx.beginPath();
  ctx.arc(0, 6, 15, 0.2, Math.PI - 0.2);
  ctx.stroke();

  ctx.fillStyle = '#ff7a00';
  ctx.beginPath();
  ctx.arc(-22, -18, 11, 0, Math.PI * 2);
  ctx.arc(22, -18, 11, 0, Math.PI * 2);
  ctx.arc(0, -28, 11, 0, Math.PI * 2);
  ctx.fill();

  ctx.fillStyle = 'rgba(255,255,255,0.9)';
  ctx.font = 'bold 11px system-ui';
  ctx.textAlign = 'center';
  ctx.fillText('mâ‚‚', 0, 3);

  ctx.restore();
}

function drawBall(cx, cy) {
  ctx.save();
  ctx.translate(cx, cy);

  ctx.fillStyle = 'rgba(0,0,0,0.3)';
  ctx.beginPath();
  ctx.ellipse(3, 5, 18, 9, 0, 0, Math.PI * 2);
  ctx.fill();

  const grad = ctx.createRadialGradient(-5, -5, 2, 0, 0, 20);
  grad.addColorStop(0, '#bbb');
  grad.addColorStop(0.5, '#888');
  grad.addColorStop(1, '#444');
  ctx.fillStyle = grad;
  ctx.beginPath();
  ctx.arc(0, 0, 20, 0, Math.PI * 2);
  ctx.fill();

  ctx.fillStyle = 'rgba(255,255,255,0.4)';
  ctx.beginPath();
  ctx.arc(-7, -7, 6, 0, Math.PI * 2);
  ctx.fill();

  ctx.fillStyle = 'white';
  ctx.font = 'bold 12px system-ui';
  ctx.textAlign = 'center';
  ctx.fillText('mâ‚ƒ', 0, 5);

  ctx.restore();
}

function drawArrow(x, y, v, color, label) {
  const scale = 12;
  const len = Math.min(Math.abs(v) * scale, 55);
  const dir = v > 0 ? -1 : 1;

  ctx.strokeStyle = color;
  ctx.fillStyle = color;
  ctx.lineWidth = 3;

  ctx.beginPath();
  ctx.moveTo(x, y);
  ctx.lineTo(x, y + dir * len);
  ctx.stroke();

  ctx.beginPath();
  ctx.moveTo(x, y + dir * (len + 8));
  ctx.lineTo(x - 6, y + dir * len);
  ctx.lineTo(x + 6, y + dir * len);
  ctx.closePath();
  ctx.fill();

  ctx.font = '11px system-ui';
  ctx.textAlign = 'center';
  ctx.fillText(`${Math.abs(v).toFixed(1)} m/s`, x, y + dir * len + dir * 20);
  ctx.fillText(label, x, y + dir * len + dir * 35);
}

function draw() {
  ctx.clearRect(0, 0, W, H);

  // stars
  ctx.fillStyle = 'rgba(255,255,255,0.04)';
  for (let i = 0; i < 40; i++) ctx.fillRect((i * 137) % W, (i * 89) % H, 2, 2);

  // reference lines
  drawLine(EQ_Y, '#4ECDC4', t('eqLine'));
  drawLine(NAT_Y, '#FFD700', t('natLine'));

  // ground
  ctx.fillStyle = '#2a2a4a';
  ctx.fillRect(0, FLOOR_Y, W, H - FLOOR_Y);

  // disk position
  let diskY;
  if (state.headDetached) diskY = yToPx(state.diskX);
  else diskY = yToPx(state.x);

  // springs
  const spc = 55;
  drawSpring(CX - spc, FLOOR_Y, CX - spc, diskY + 15);
  drawSpring(CX + spc, FLOOR_Y, CX + spc, diskY + 15);

  // disk
  const barW = 160, barH = 30;
  ctx.fillStyle = 'rgba(100, 100, 150, 0.9)';
  ctx.strokeStyle = 'rgba(255,255,255,0.4)';
  ctx.lineWidth = 2;
  ctx.beginPath();
  ctx.roundRect(CX - barW/2, diskY - barH/2, barW, barH, 8);
  ctx.fill();
  ctx.stroke();

  ctx.fillStyle = 'rgba(255,255,255,0.8)';
  ctx.font = '13px system-ui';
  ctx.textAlign = 'center';
  ctx.fillText('mâ‚+mâ‚‚', CX, diskY + 5);

  // head
  let headPxY;
  if (state.headDetached) headPxY = yToPx(state.headY);
  else headPxY = diskY - barH/2 - 32;
  drawClownHead(CX, headPxY);

  // ball (visual fix: never under head just after collision)
  let ballPxY;
  const HEAD_R = 28, BALL_R = 20;
  if (!state.ballActive) {
    ballPxY = yToPx(0) - 90;
  } else {
    const justAfterCollision = (state.animState === 'post_collision' && state.t < 0.04 && state.ballY <= 0.06);
    const atCollisionFrame = (state.animState === 'at_collision');
    if (atCollisionFrame || justAfterCollision) ballPxY = headPxY - HEAD_R - BALL_R - 2;
    else ballPxY = yToPx(state.ballY);
  }
  drawBall(CX, ballPxY);

  // arrows
  if (state.v !== 0 && !state.headDetached) drawArrow(CX - 120, diskY, state.v, '#4ECDC4', t('arrowSystem'));
  if (state.ballActive && state.ballV !== 0) drawArrow(CX + 110, ballPxY, state.ballV, '#FF6B6B', t('arrowBall'));
  if (state.headDetached && state.headV !== 0) drawArrow(CX - 110, headPxY, state.headV, '#7ED321', t('arrowHead'));
  if (state.headDetached) drawArrow(CX - 150, diskY, state.diskV, '#4ECDC4', t('arrowDisk'));

  // meeting snapshot: no spoiler y on canvas
  if (state.animState === 'meeting_done') {
    ctx.fillStyle = 'rgba(255, 215, 0, 0.25)';
    ctx.beginPath();
    ctx.arc(CX, yToPx(Y_MEET), 55, 0, Math.PI * 2);
    ctx.fill();

    ctx.fillStyle = '#FFD700';
    ctx.font = 'bold 18px system-ui';
    ctx.textAlign = 'center';
    ctx.fillText(t('meetingBanner'), CX, yToPx(Y_MEET) - 60);
  }
}

/* =====================================================
   GAME LOOP
===================================================== */
let lastTime = 0;
function gameLoop(ts){
  const dt = Math.min((ts - lastTime) / 1000, 0.05);
  lastTime = ts;
  update(dt);
  draw();
  requestAnimationFrame(gameLoop);
}

/* =====================================================
   EVENTS
===================================================== */
$('btnStartGame').addEventListener('click', () => {
  $('introModal').classList.add('hidden');
  showQuestion(0);
});
$('btnCheck').addEventListener('click', checkAnswer);
$('btnHint').addEventListener('click', showHint);
$('btnReveal').addEventListener('click', revealAnswer);
$('btnNext').addEventListener('click', nextQuestion);
$('btnStart').addEventListener('click', () => { if (!state.running) state.running = true; });
$('btnReset').addEventListener('click', () => location.reload());
$('btnPlayAgain').addEventListener('click', () => location.reload());

$('quizInput').addEventListener('keypress', (e)=>{
  if(e.key === 'Enter'){
    if(!$('btnCheck').classList.contains('hidden')) checkAnswer();
    else if(!$('btnNext').classList.contains('hidden')) nextQuestion();
  }
});

// language selectors
if($('langSelect')) $('langSelect').addEventListener('change', e=>setLanguage(e.target.value));
if($('langSelectIntro')) $('langSelectIntro').addEventListener('change', e=>setLanguage(e.target.value));

/* =====================================================
   END GAME
===================================================== */
function endGame() {
  state.animState = 'meeting_done';
  state.running = false;

  const maxScore = 140;
  const pct = Math.round((state.score / maxScore) * 100);

  let medal, title;
  if (pct >= 85) { medal = 'ğŸ¥‡'; title = t('endExcellent'); }
  else if (pct >= 70) { medal = 'ğŸ¥ˆ'; title = t('endGood'); }
  else if (pct >= 50) { medal = 'ğŸ¥‰'; title = t('endOk'); }
  else { medal = 'ğŸ“š'; title = t('endStudy'); }

  $('endTitle').textContent = title;
  $('endMedal').textContent = medal;

  $('endResults').innerHTML = `
    <p style="font-size:14px;">${t('endScore')}: <strong style="color:var(--accent-gold);font-size:18px;">${state.score}/${maxScore}</strong></p>
    <p>${t('endAccuracy')}: <strong>${pct}%</strong></p>
  `;

  // Teacher-facing numbers (still fine)
  $('endAnalysis').innerHTML = `
    <p style="font-size:12px;line-height:1.8;color:var(--muted);">
      â€¢ uâ‚€ = Ï‰Aâ‚€ = <strong>${U0.toFixed(1)} m/s</strong><br>
      â€¢ uâ‚' = <strong>${U1_AFTER.toFixed(2)} m/s</strong>, uâ‚ƒ' = <strong>${U3_AFTER.toFixed(2)} m/s</strong><br>
      â€¢ Aâ‚ = <strong>${(A1*100).toFixed(1)} cm</strong><br>
      â€¢ x<sub>det</sub> = d = <strong>0.1 m</strong><br>
      â€¢ u<sub>det</sub> = <strong>${V_DETACH.toFixed(2)} m/s</strong><br>
      â€¢ t<sub>det</sub> â‰ˆ <strong>0.38 s</strong><br>
      â€¢ y<sub>meet</sub> â‰ˆ <strong>${Y_MEET.toFixed(2)} m</strong><br>
    </p>
  `;

  $('endModal').classList.remove('hidden');
}

/* =====================================================
   INIT
===================================================== */
$('scoreDisplay').textContent = state.score;
setLanguage('el'); // Greek default, English 2nd in dropdown
requestAnimationFrame(gameLoop);
</script>
</body>
</html>
